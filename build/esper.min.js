!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.esper=t()}}(function(){return function t(e,r,i){function n(s,a){if(!r[s]){if(!e[s]){var f="function"==typeof require&&require;if(!a&&f)return f(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var h=r[s]={exports:{}};e[s][0].call(h.exports,function(t){var r=e[s][1][t];return n(r?r:t)},h,h.exports,t,e,r,i)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)n(i[s]);return n}({1:[function(t,e,r){!function(){"use strict";function r(t,e){if(t=t||{},t.wrapS=t.wrapS||t.wrap,t.wrapT=t.wrapT||t.wrap,t.minFilter=t.minFilter||t.filter,t.magFilter=t.magFilter||t.filter,t.wrapS=f[t.wrapS]?t.wrapS:l,t.wrapT=f[t.wrapT]?t.wrapT:l,t.minFilter=a[t.minFilter]?t.minFilter:E,t.magFilter=s[t.magFilter]?t.magFilter:E,t.mipMap=void 0!==t.mipMap?t.mipMap:T,t.invertY=void 0!==t.invertY?t.invertY:m,t.preMultiplyAlpha=void 0!==t.preMultiplyAlpha?t.preMultiplyAlpha:d,t.format=h[t.format]?t.format:c,"string"==typeof t.src){var r=this;n.load({url:t.src,success:function(n){t.type="UNSIGNED_BYTE",t.src=o.resizeCanvas(t,n),i.call(r,t),e&&e(null,r)},error:function(t){e&&e(t,null)}})}else o.isCanvasType(t.src)?(t.type="UNSIGNED_BYTE",t.src=o.resizeCanvas(t,t.src),i.call(this,t)):(void 0===t.src&&(t.mipMap=!1),t.type=u[t.type]?t.type:p,i.call(this,t))}var i=t("./Texture2D"),n=t("../util/ImageLoader"),o=t("../util/Util"),s={NEAREST:!0,LINEAR:!0},a={NEAREST:!0,LINEAR:!0,NEAREST_MIPMAP_NEAREST:!0,LINEAR_MIPMAP_NEAREST:!0,NEAREST_MIPMAP_LINEAR:!0,LINEAR_MIPMAP_LINEAR:!0},f={REPEAT:!0,MIRRORED_REPEAT:!0,CLAMP_TO_EDGE:!0},u={UNSIGNED_BYTE:!0,FLOAT:!0},h={RGB:!0,RGBA:!0},p="UNSIGNED_BYTE",c="RGBA",l="REPEAT",E="LINEAR",d=!0,T=!0,m=!0;r.prototype=Object.create(i.prototype),e.exports=r}()},{"../util/ImageLoader":17,"../util/Util":20,"./Texture2D":8}],2:[function(t,e,r){!function(){"use strict";function r(t){t=t||{},t.wrapS=t.wrapS||t.wrap,t.wrapT=t.wrapT||t.wrap,t.minFilter=t.minFilter||t.filter,t.magFilter=t.magFilter||t.filter,t.wrapS=s[t.wrapS]?t.wrapS:p,t.wrapT=s[t.wrapT]?t.wrapT:p,t.minFilter=o[t.minFilter]?t.minFilter:c,t.magFilter=n[t.magFilter]?t.magFilter:c,t.mipMap=!1,t.invertY=!1,t.preMultiplyAlpha=!1,t.format=f[t.format]?t.format:h,"DEPTH_STENCIL"===t.format?t.type="UNSIGNED_INT_24_8_WEBGL":t.type=a[t.type]?t.type:u,i.call(this,t)}var i=t("./Texture2D"),n={NEAREST:!0,LINEAR:!0},o={NEAREST:!0,LINEAR:!0},s={REPEAT:!0,CLAMP_TO_EDGE:!0,MIRRORED_REPEAT:!0},a={UNSIGNED_BYTE:!0,UNSIGNED_SHORT:!0,UNSIGNED_INT:!0},f={DEPTH_COMPONENT:!0,DEPTH_STENCIL:!0},u="UNSIGNED_INT",h="DEPTH_COMPONENT",p="CLAMP_TO_EDGE",c="LINEAR";r.prototype=Object.create(i.prototype),e.exports=r}()},{"./Texture2D":8}],3:[function(t,e,r){!function(){"use strict";function r(t,e){e=e||{};var r=this.gl=i.get();if(this.state=n.get(r),this.buffer=r.createBuffer(),this.type=o[e.type]?e.type:f,"UNSIGNED_INT"===this.type&&!i.checkExtension("OES_element_index_uint"))throw"Cannot create IndexBuffer of type `UNSIGNED_INT` as extension `OES_element_index_uint` is not supported";if(this.mode=s[e.mode]?e.mode:u,this.count=void 0!==e.count?e.count:p,this.byteOffset=void 0!==e.byteOffset?e.byteOffset:h,this.byteLength=0,t)if(t instanceof WebGLBuffer){if(void 0===e.byteLength)throw"Argument of type `WebGLBuffer` must be complimented with a corresponding `options.byteLength`";this.byteLength=e.byteLength,this.buffer=t}else if("number"==typeof t){if(void 0===e.type)throw"Argument of type `number` must be complimented with a corresponding `options.type`";this.bufferData(t)}else if(t instanceof ArrayBuffer){if(void 0===e.type)throw"Argument of type `ArrayBuffer` must be complimented with a corresponding `options.type`";this.bufferData(t)}else this.bufferData(t);else if(void 0===e.type)throw"Empty buffer must be complimented with a corresponding `options.type`";if(this.count*a[this.type]+this.byteOffset>this.byteLength)throw"IndexBuffer `count` of "+this.count+" and `byteOffset` of "+this.byteOffset+" overflows the length of the buffer ("+this.byteLength+")"}var i=t("./WebGLContext"),n=t("./WebGLContextState"),o={UNSIGNED_SHORT:!0,UNSIGNED_INT:!0},s={POINTS:!0,LINES:!0,LINE_STRIP:!0,LINE_LOOP:!0,TRIANGLES:!0,TRIANGLE_STRIP:!0,TRIANGLE_FAN:!0},a={UNSIGNED_SHORT:2,UNSIGNED_INT:4},f="UNSIGNED_SHORT",u="TRIANGLES",h=0,p=0;r.prototype.bufferData=function(t){var e=this.gl;if(t instanceof Array&&(t="UNSIGNED_INT"===this.type?new Uint32Array(t):new Uint16Array(t)),t instanceof Uint16Array)this.type="UNSIGNED_SHORT";else if(t instanceof Uint32Array)this.type="UNSIGNED_INT";else if(!(t instanceof ArrayBuffer)&&"number"!=typeof t)throw"Argument must be of type `Array`, `ArrayBuffer`, `ArrayBufferView`, or `number`";if(this.count===p&&("number"==typeof t?this.count=t/a[this.type]:this.count=t.length),"number"==typeof t){if(t%a[this.type])throw"Byte length must be multiple of "+a[this.type];this.byteLength=t}else this.byteLength=t.length*a[this.type];return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.buffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW),this},r.prototype.bufferSubData=function(t,e){var r=this.gl;if(0===this.byteLength)throw"Buffer has not been allocated";if(t instanceof Array)t="UNSIGNED_INT"===this.type?new Uint32Array(t):new Uint16Array(t);else if(!(t instanceof Uint16Array||t instanceof Uint32Array||t instanceof ArrayBuffer))throw"Argument must be of type `Array`, `ArrayBuffer`, or `ArrayBufferView`";e=void 0!==e?e:h;var i=t.length*a[this.type];if(e+i>this.byteLength)throw"Argument of length "+i+" bytes and byte offset of "+e+" bytes overflows the buffer length of "+this.byteLength+" bytes";return r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,this.buffer),r.bufferSubData(r.ELEMENT_ARRAY_BUFFER,e,t),this},r.prototype.draw=function(t){t=t||{};var e=this.gl,r=e[t.mode||this.mode],i=e[this.type],n=void 0!==t.byteOffset?t.byteOffset:this.byteOffset,o=void 0!==t.count?t.count:this.count;if(0===o)throw"Attempting to draw with a count of 0";if(n+o*a[this.type]>this.byteLength)throw"Attempting to draw with `count` of "+o+" and `byteOffset` of "+n+" which overflows the total byte length of the buffer ("+this.byteLength+")";return this.state.boundIndexBuffer!==this.buffer&&(e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.buffer),this.state.boundIndexBuffer=this.buffer),e.drawElements(r,o,i,n),this},e.exports=r}()},{"./WebGLContext":13,"./WebGLContextState":14}],4:[function(t,e,r){!function(){"use strict";function r(){var t=this.gl=i.get();this.state=n.get(t),this.framebuffer=t.createFramebuffer(),this.textures={}}var i=t("./WebGLContext"),n=t("./WebGLContextState"),o=t("../util/Util"),s={TEXTURE_2D:!0,TEXTURE_CUBE_MAP:!0},a={DEPTH_COMPONENT:!0,DEPTH_STENCIL:!0};r.prototype.push=function(){if(this.state.renderTargets.top()!==this){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer)}return this.state.renderTargets.push(this),this},r.prototype.pop=function(){var t=this.state;if(t.renderTargets.top()!==this)throw"The current render target is not the top most element on the stack";t.renderTargets.pop();var e,r=t.renderTargets.top();return r?(e=r.gl,e.bindFramebuffer(e.FRAMEBUFFER,r.framebuffer)):(e=this.gl,e.bindFramebuffer(e.FRAMEBUFFER,null)),this},r.prototype.setColorTarget=function(t,e,r){var i=this.gl;if(!t)throw"Texture argument is missing";if(s[e]&&void 0===r&&(r=e,e=0),void 0===e)e=0;else if(!o.isInteger(e)||0>e)throw"Texture color attachment index is invalid";if(r&&!s[r])throw"Texture target is invalid";return this.textures["color"+e]=t,this.push(),i.framebufferTexture2D(i.FRAMEBUFFER,i["COLOR_ATTACHMENT"+e],i[r||"TEXTURE_2D"],t.texture,0),this.pop(),this},r.prototype.setDepthTarget=function(t){if(!t)throw"Texture argument is missing";if(!a[t.format])throw"Provided texture is not of format `DEPTH_COMPONENT` or `DEPTH_STENCIL`";var e=this.gl;return this.textures.depth=t,this.push(),e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,t.texture,0),this.pop(),this},r.prototype.resize=function(t,e){if("number"!=typeof t||0>=t)throw"Provided `width` of "+t+" is invalid";if("number"!=typeof e||0>=e)throw"Provided `height` of "+e+" is invalid";var r=this.textures;return Object.keys(r).forEach(function(i){r[i].resize(t,e)}),this},e.exports=r}()},{"../util/Util":20,"./WebGLContext":13,"./WebGLContextState":14}],5:[function(t,e,r){!function(){"use strict";function r(t){var e={};t.forEach(function(t){Object.keys(t.pointers).forEach(function(t){e[t]=e[t]||0,e[t]++})}),Object.keys(e).forEach(function(t){if(e[t]>1)throw"More than one attribute pointer exists for index "+t})}function i(t){if(t=t||{},t.vertexBuffer||t.vertexBuffers)this.vertexBuffers=t.vertexBuffers||[t.vertexBuffer];else if(t.vertices){var e=new n(t.vertices);this.vertexBuffers=[new o(e)]}else this.vertexBuffers=[];t.indexBuffer?this.indexBuffer=t.indexBuffer:t.indices?this.indexBuffer=new s(t.indices):this.indexBuffer=null,r(this.vertexBuffers),this.options={mode:t.mode,byteOffset:t.byteOffset,count:t.count}}var n=t("../core/VertexPackage"),o=t("../core/VertexBuffer"),s=t("../core/IndexBuffer");i.prototype.draw=function(t){var e=t||{};return e.mode=e.mode||this.options.mode,e.byteOffset=void 0!==e.byteOffset?e.byteOffset:this.options.byteOffset,e.count=void 0!==e.count?e.count:this.options.count,this.indexBuffer?(this.vertexBuffers.forEach(function(t){t.bind()}),this.indexBuffer.draw(e),this.vertexBuffers.forEach(function(t){t.unbind()})):this.vertexBuffers.forEach(function(t){t.bind(),t.draw(e),t.unbind()}),this},e.exports=i}()},{"../core/IndexBuffer":3,"../core/VertexBuffer":10,"../core/VertexPackage":11}],6:[function(t,e,r){!function(){"use strict";function r(t,e){return t[e.name]?t[e.name].index:Object.keys(t).length}function i(t,e,i){var n=l.parseDeclarations([e,i],["uniform","attribute"]);n.forEach(function(e){if("attribute"===e.qualifier){var i=r(t.attributes,e);t.attributes[e.name]={type:e.type,index:i}}else"uniform"===e.qualifier&&(t.uniforms[e.name]={type:e.type,func:m[e.type+(e.count>1?"[]":"")]})})}function n(t,e,r){var i=t.createShader(t[r]);if(t.shaderSource(i,e),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS))throw"An error occurred compiling the shaders:\n"+t.getShaderInfoLog(i);return i}function o(t){var e=t.gl,r=t.attributes;Object.keys(r).forEach(function(i){e.bindAttribLocation(t.program,r[i].index,i)})}function s(t){var e=t.gl,r=t.uniforms;Object.keys(r).forEach(function(i){r[i].location=e.getUniformLocation(t.program,i)})}function a(t){return function(e){T.load({url:t,responseType:"text",success:function(t){e(null,t)},error:function(t){e(t,null)}})}}function f(t){return function(e){e(null,t)}}function u(t){return function(e){var r=[];t=t||[],t=t instanceof Array?t:[t],t.forEach(function(t){l.isGLSL(t)?r.push(f(t)):r.push(a(t))}),d.parallel(r,e)}}function h(t,e){var r=t.gl,a=e.common.join(""),f=e.vert.join(""),u=e.frag.join(""),h=n(r,a+f,"VERTEX_SHADER"),p=n(r,a+u,"FRAGMENT_SHADER");if(i(t,f,u),t.program=r.createProgram(),r.attachShader(t.program,h),r.attachShader(t.program,p),o(t),r.linkProgram(t.program),!r.getProgramParameter(t.program,r.LINK_STATUS))throw"An error occured linking the shader:\n"+r.getProgramInfoLog(t.program);s(t)}function p(t,e){var r=this;if(t=t||{},!t.vert)throw"Vertex shader argument has not been provided";if(!t.frag)throw"Fragment shader argument has not been provided";this.program=0,this.gl=c.get(),this.state=E.get(this.gl),this.version=t.version||"1.00",this.attributes={},this.uniforms={},t.attributes&&t.attributes.forEach(function(t,e){r.attributes[t]={index:e}}),d.parallel({common:u(t.common),vert:u(t.vert),frag:u(t.frag)},function(t,i){return t?void(e&&e(t,null)):(h(r,i),void(e&&e(null,r)))})}var c=t("./WebGLContext"),l=t("./ShaderParser"),E=t("./WebGLContextState"),d=t("../util/Async"),T=t("../util/XHRLoader"),m={bool:"uniform1i","bool[]":"uniform1iv","float":"uniform1f","float[]":"uniform1fv","int":"uniform1i","int[]":"uniform1iv",uint:"uniform1i","uint[]":"uniform1iv",vec2:"uniform2fv","vec2[]":"uniform2fv",ivec2:"uniform2iv","ivec2[]":"uniform2iv",vec3:"uniform3fv","vec3[]":"uniform3fv",ivec3:"uniform3iv","ivec3[]":"uniform3iv",vec4:"uniform4fv","vec4[]":"uniform4fv",ivec4:"uniform4iv","ivec4[]":"uniform4iv",mat2:"uniformMatrix2fv","mat2[]":"uniformMatrix2fv",mat3:"uniformMatrix3fv","mat3[]":"uniformMatrix3fv",mat4:"uniformMatrix4fv","mat4[]":"uniformMatrix4fv",sampler2D:"uniform1i",samplerCube:"uniform1i"};p.prototype.push=function(){return this.state.shaders.top()!==this&&this.gl.useProgram(this.program),this.state.shaders.push(this),this},p.prototype.pop=function(){var t=this.state;if(t.shaders.top()!==this)throw"Shader is not the top most element on the stack";t.shaders.pop();var e=t.shaders.top();return e&&e!==this?e.gl.useProgram(e.program):this.gl.useProgram(null),this},p.prototype.setUniform=function(t,e){if(this!==this.state.shaders.top())throw"Attempting to set uniform `"+t+"` for an unbound shader";var r=this.uniforms[t];if(!r)throw"No uniform found under name `"+t+"`";if(void 0===e||null===e)throw"Argument passed for uniform `"+t+"` is undefined";return e instanceof Array?e=new Float32Array(e):"boolean"==typeof e&&(e=e?1:0),"mat2"===r.type||"mat3"===r.type||"mat4"===r.type?this.gl[r.func](r.location,!1,e):this.gl[r.func](r.location,e),this},p.prototype.setUniforms=function(t){if(this!==this.state.shaders.top())throw"Attempting to set uniform `"+name+"` for an unbound shader";var e=this.gl,r=this.uniforms;return Object.keys(t).forEach(function(i){var n=t[i],o=r[i];if(!o)throw"No uniform found under name `"+i+"`";if(void 0===n||null===n)throw"Argument passed for uniform `"+i+"` is undefined";n instanceof Array?n=new Float32Array(n):"boolean"==typeof n&&(n=n?1:0),"mat2"===o.type||"mat3"===o.type||"mat4"===o.type?e[o.func](o.location,!1,n):e[o.func](o.location,n)}),this},e.exports=p}()},{"../util/Async":16,"../util/XHRLoader":21,"./ShaderParser":7,"./WebGLContext":13,"./WebGLContextState":14}],7:[function(t,e,r){!function(){"use strict";function t(t){return t.replace(u,"")}function r(t){return t.replace(h," ").replace(p," ").replace(c,"$2$4$6")}function i(t,e,r,i){var n=i.match(l),o=n[1],s=void 0===n[2]?1:parseInt(n[2],10);return{qualifier:t,precision:e,type:r,name:o,count:s}}function n(t,e){var r,n=t.split(",").map(function(t){return t.trim()}),o=n.shift().split(" "),s=o.shift(),u=o.shift();a[u]?r=o.shift():(r=u,u=e[f[r]]);var h=o.concat(n),p=[];return h.forEach(function(t){p.push(i(s,u,r,t))}),p}function o(e,i){var o=t(e),s=r(o),a=s.split(";"),f=i.join("|"),u=new RegExp(".*\\b("+f+")\\b.*"),h={},p=[];return a.forEach(function(t){var e=t.match(E);if(e)return void(h[e[3]]=e[2]);var r=t.match(u);r&&(p=p.concat(n(r[0],h)))}),p}function s(t){var e={};return t.filter(function(t){return e[t.name]?!1:(e[t.name]=!0,!0)})}var a={highp:!0,mediump:!0,lowp:!0},f={"float":"float",vec2:"float",vec3:"float",vec4:"float",ivec2:"int",ivec3:"int",ivec4:"int","int":"int",uint:"int",sampler2D:"sampler2D",samplerCube:"samplerCube"},u=/(\/\*([\s\S]*?)\*\/)|(\/\/(.*)$)/gm,h=/(\r\n|\n|\r)/gm,p=/\s{2,}/g,c=/(\s*)(\[)(\s*)(\d+)(\s*)(\])(\s*)/g,l=/([a-zA-Z_][a-zA-Z0-9_]*)(?:\[(\d+)\])?/,E=/\b(precision)\s+(\w+)\s+(\w+)/,d=/void\s+main\s*\(\s*(void)*\s*\)\s*/im;e.exports={parseDeclarations:function(t,e){if(!e||0===e.length||!t||0===t.length)return[];t=t instanceof Array?t:[t],e=e instanceof Array?e:[e];var r=[];return t.forEach(function(t){r=r.concat(o(t,e))}),s(r)},isGLSL:function(t){return d.test(t)}}}()},{}],8:[function(t,e,r){!function(){"use strict";function r(t){if(t=t||{},t.wrapS=t.wrapS||t.wrap,t.wrapT=t.wrapT||t.wrap,t.minFilter=t.minFilter||t.filter,t.magFilter=t.magFilter||t.filter,this.wrapS=t.wrapS||E,this.wrapT=t.wrapT||E,this.minFilter=t.minFilter||d,this.magFilter=t.magFilter||d,this.mipMap=void 0!==t.mipMap?t.mipMap:m,this.invertY=void 0!==t.invertY?t.invertY:y,this.preMultiplyAlpha=void 0!==t.preMultiplyAlpha?t.preMultiplyAlpha:T,this.format=t.format||l,p[this.format]&&!i.checkExtension("WEBGL_depth_texture"))throw"Cannot create Texture2D of format `"+this.format+"` as `WEBGL_depth_texture` extension is unsupported";if(this.type=t.type||c,"FLOAT"===this.type&&!i.checkExtension("OES_texture_float"))throw"Cannot create Texture2D of type `FLOAT` as `OES_texture_float` extension is unsupported";if(!o.isCanvasType(t.src)){if("number"!=typeof t.width||t.width<=0)throw"`width` argument is missing or invalid";if("number"!=typeof t.height||t.height<=0)throw"`height` argument is missing or invalid";if(o.mustBePowerOfTwo(this)){if(!o.isPowerOfTwo(t.width))throw"Parameters require a power-of-two texture, yet provided width of "+t.width+" is not a power of two";if(!o.isPowerOfTwo(t.height))throw"Parameters require a power-of-two texture, yet provided height of "+t.height+" is not a power of two"}}var e=this.gl=i.get();this.state=n.get(e),this.texture=e.createTexture(),this.bufferData(t.src||null,t.width,t.height),this.setParameters(this)}var i=t("./WebGLContext"),n=t("./WebGLContextState"),o=t("../util/Util"),s={NEAREST:!0,LINEAR:!0},a={NEAREST:!0,LINEAR:!0,NEAREST_MIPMAP_NEAREST:!0,LINEAR_MIPMAP_NEAREST:!0,NEAREST_MIPMAP_LINEAR:!0,LINEAR_MIPMAP_LINEAR:!0},f={NEAREST:!0,LINEAR:!0},u={NEAREST_MIPMAP_NEAREST:!0,LINEAR_MIPMAP_NEAREST:!0,NEAREST_MIPMAP_LINEAR:!0,LINEAR_MIPMAP_LINEAR:!0},h={REPEAT:!0,MIRRORED_REPEAT:!0,CLAMP_TO_EDGE:!0},p={DEPTH_COMPONENT:!0,DEPTH_STENCIL:!0},c="UNSIGNED_BYTE",l="RGBA",E="REPEAT",d="LINEAR",T=!0,m=!0,y=!0,v="_MIPMAP_LINEAR";r.prototype.push=function(t){if(void 0===t)t=0;else if(!o.isInteger(t)||0>t)throw"Texture unit location is invalid";if(this.state.texture2Ds.top(t)!==this){var e=this.gl;e.activeTexture(e["TEXTURE"+t]),e.bindTexture(e.TEXTURE_2D,this.texture)}return this.state.texture2Ds.push(t,this),this},r.prototype.pop=function(t){if(void 0===t)t=0;else if(!o.isInteger(t)||0>t)throw"Texture unit location is invalid";var e=this.state;if(e.texture2Ds.top(t)!==this)throw"Texture2D is not the top most element on the stack";e.texture2Ds.pop(t);var r,i=e.texture2Ds.top(t);i?i!==this&&(r=i.gl,r.activeTexture(r["TEXTURE"+t]),r.bindTexture(r.TEXTURE_2D,i.texture)):(r=this.gl,r.bindTexture(r.TEXTURE_2D,null))},r.prototype.bufferData=function(t,e,r){var i=this.gl;if(this.push(),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,this.invertY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.preMultiplyAlpha),t instanceof Array&&(t="UNSIGNED_SHORT"===this.type?new Uint16Array(t):"UNSIGNED_INT"===this.type?new Uint32Array(t):"FLOAT"===this.type?new Float32Array(t):new Uint8Array(t)),t instanceof Uint8Array)this.type="UNSIGNED_BYTE";else if(t instanceof Uint16Array)this.type="UNSIGNED_SHORT";else if(t instanceof Uint32Array)this.type="UNSIGNED_INT";else if(t instanceof Float32Array)this.type="FLOAT";else if(t&&!(t instanceof ArrayBuffer)&&!o.isCanvasType(t))throw"Argument must be of type `Array`, `ArrayBuffer`, `ArrayBufferView`, `ImageData`, `HTMLImageElement`, `HTMLCanvasElement`, `HTMLVideoElement`, or null";return o.isCanvasType(t)?(this.width=t.width,this.height=t.height,i.texImage2D(i.TEXTURE_2D,0,i[this.format],i[this.format],i[this.type],t)):(this.width=e||this.width,this.height=r||this.height,i.texImage2D(i.TEXTURE_2D,0,i[this.format],this.width,this.height,0,i[this.format],i[this.type],t)),this.mipMap&&i.generateMipmap(i.TEXTURE_2D),this.pop(),this},r.prototype.setParameters=function(t){var e=this.gl;this.push();var r=t.wrapS||t.wrap;if(r){if(!h[r])throw"Texture parameter `"+r+"` is not a valid value for `TEXTURE_WRAP_S`";this.wrapS=r,e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e[this.wrapS])}if(r=t.wrapT||t.wrap){if(!h[r])throw"Texture parameter `"+r+"` is not a valid value for `TEXTURE_WRAP_T`";this.wrapT=r,e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e[this.wrapT])}if(r=t.magFilter||t.filter){if(!s[r])throw"Texture parameter `"+r+"` is not a valid value for `TEXTURE_MAG_FILTER`";this.magFilter=r,e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e[this.magFilter])}if(r=t.minFilter||t.filter)if(this.mipMap){if(f[r]&&(r+=v),!u[r])throw"Texture parameter `"+r+"` is not a valid value for `TEXTURE_MIN_FILTER`";this.minFilter=r,e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e[this.minFilter])}else{if(!a[r])throw"Texture parameter `"+r+"` is not a valid value for `TEXTURE_MIN_FILTER`";this.minFilter=r,e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e[this.minFilter])}return this.pop(),this},r.prototype.resize=function(t,e){if("number"!=typeof t||0>=t)throw"Provided `width` of "+t+" is invalid";if("number"!=typeof e||0>=e)throw"Provided `height` of "+e+" is invalid";return this.bufferData(null,t,e),this},e.exports=r}()},{"../util/Util":20,"./WebGLContext":13,"./WebGLContextState":14}],9:[function(t,e,r){!function(){"use strict";function r(t){if("number"!=typeof t.width||t.width<=0)throw"`width` argument is missing or invalid";if("number"!=typeof t.height||t.height<=0)throw"`height` argument is missing or invalid";if(t.width!==t.height)throw"Provided `width` must be equal to `height`";if(h.mustBePowerOfTwo(t)&&!h.isPowerOfTwo(t.width))throw"Parameters require a power-of-two texture, yet provided size of "+t.width+" is not a power of two"}function i(t,e,r){return function(i){p.load({url:r,success:function(r){r=h.resizeCanvas(t,r),t.bufferData(e,r),i(null)},error:function(t){i(t,null)}})}}function n(t,e,r){return function(i){r=h.resizeCanvas(t,r),t.bufferData(e,r),i(null)}}function o(t,e,i){return r(t),function(r){t.bufferData(e,i),r(null)}}function s(t,e){var s=this,p=this.gl=a.get();if(this.state=f.get(p),this.texture=p.createTexture(),t.wrapS=t.wrapS||t.wrap,t.wrapT=t.wrapT||t.wrap,t.minFilter=t.minFilter||t.filter,t.magFilter=t.magFilter||t.filter,this.wrapS=v[t.wrapS]?t.wrapS:g,this.wrapT=v[t.wrapT]?t.wrapT:g,this.minFilter=T[t.minFilter]?t.minFilter:x,this.magFilter=d[t.magFilter]?t.magFilter:x,this.mipMap=void 0!==t.mipMap?t.mipMap:R,this.invertY=void 0!==t.invertY?t.invertY:I,this.preMultiplyAlpha=void 0!==t.preMultiplyAlpha?t.preMultiplyAlpha:w,this.format=A[t.format]?t.format:b,this.type=t.type||_,"FLOAT"===this.type&&!a.checkExtension("OES_texture_float"))throw"Cannot create Texture2D of type `FLOAT` as `OES_texture_float` extension is unsupported";if(this.width=t.width,this.height=t.height,this.bufferedFaces=[],t.faces){var E=[];c.forEach(function(e){var r=t.faces[e],a=l[e];"string"==typeof r?E.push(i(s,a,r)):h.isCanvasType(r)?E.push(n(s,a,r)):E.push(o(s,a,r))}),u.parallel(E,function(t){return t?void(e&&e(t,null)):(s.setParameters(s),void(e&&e(null,s)))})}else r(this),c.forEach(function(t){s.bufferData(l[t],null)}),this.setParameters(this)}var a=t("./WebGLContext"),f=t("./WebGLContextState"),u=t("../util/Async"),h=t("../util/Util"),p=t("../util/ImageLoader"),c=["-x","+x","-y","+y","-z","+z"],l={"+z":"TEXTURE_CUBE_MAP_POSITIVE_Z","-z":"TEXTURE_CUBE_MAP_NEGATIVE_Z","+x":"TEXTURE_CUBE_MAP_POSITIVE_X","-x":"TEXTURE_CUBE_MAP_NEGATIVE_X","+y":"TEXTURE_CUBE_MAP_POSITIVE_Y","-y":"TEXTURE_CUBE_MAP_NEGATIVE_Y"},E={TEXTURE_CUBE_MAP_POSITIVE_Z:!0,TEXTURE_CUBE_MAP_NEGATIVE_Z:!0,TEXTURE_CUBE_MAP_POSITIVE_X:!0,TEXTURE_CUBE_MAP_NEGATIVE_X:!0,TEXTURE_CUBE_MAP_POSITIVE_Y:!0,TEXTURE_CUBE_MAP_NEGATIVE_Y:!0},d={NEAREST:!0,LINEAR:!0},T={NEAREST:!0,LINEAR:!0,NEAREST_MIPMAP_NEAREST:!0,LINEAR_MIPMAP_NEAREST:!0,NEAREST_MIPMAP_LINEAR:!0,LINEAR_MIPMAP_LINEAR:!0},m={NEAREST:!0,LINEAR:!0},y={NEAREST_MIPMAP_NEAREST:!0,LINEAR_MIPMAP_NEAREST:!0,NEAREST_MIPMAP_LINEAR:!0,LINEAR_MIPMAP_LINEAR:!0},v={REPEAT:!0,MIRRORED_REPEAT:!0,CLAMP_TO_EDGE:!0},A={RGB:!0,RGBA:!0},_="UNSIGNED_BYTE",b="RGBA",g="CLAMP_TO_EDGE",x="LINEAR",w=!0,R=!0,I=!0,N="_MIPMAP_LINEAR";s.prototype.push=function(t){if(void 0===t)t=0;else if(!h.isInteger(t)||0>t)throw"Texture unit location is invalid";if(this.state.textureCubeMaps.top(t)!==this){var e=this.gl;e.activeTexture(e["TEXTURE"+t]),e.bindTexture(e.TEXTURE_CUBE_MAP,this.texture)}return this.state.textureCubeMaps.push(t,this),this},s.prototype.pop=function(t){if(void 0===t)t=0;else if(!h.isInteger(t)||0>t)throw"Texture unit location is invalid";var e=this.state;if(e.textureCubeMaps.top(t)!==this)throw"The current texture is not the top most element on the stack";e.textureCubeMaps.pop(t);var r,i=e.textureCubeMaps.top(t);return i?i!==this&&(r=i.gl,r.activeTexture(r["TEXTURE"+t]),r.bindTexture(r.TEXTURE_CUBE_MAP,i.texture)):(r=this.gl,r.bindTexture(r.TEXTURE_CUBE_MAP,null)),this},s.prototype.bufferData=function(t,e){if(!E[t])throw"Provided `target` of "+t+" is invalid";var r=this.gl;if(this.push(),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,this.invertY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.preMultiplyAlpha),e instanceof Array&&(e="UNSIGNED_SHORT"===this.type?new Uint16Array(e):"UNSIGNED_INT"===this.type?new Uint32Array(e):"FLOAT"===this.type?new Float32Array(e):new Uint8Array(e)),e instanceof Uint8Array)this.type="UNSIGNED_BYTE";else if(e instanceof Uint16Array)this.type="UNSIGNED_SHORT";else if(e instanceof Uint32Array)this.type="UNSIGNED_INT";else if(e instanceof Float32Array)this.type="FLOAT";else if(e&&!(e instanceof ArrayBuffer)&&!h.isCanvasType(e))throw"Argument must be of type `Array`, `ArrayBuffer`, `ArrayBufferView`, `ImageData`, `HTMLImageElement`, `HTMLCanvasElement`, `HTMLVideoElement`, or null";return h.isCanvasType(e)?(this.width=e.width,this.height=e.height,r.texImage2D(r[t],0,r[this.format],r[this.format],r[this.type],e)):r.texImage2D(r[t],0,r[this.format],this.width,this.height,0,r[this.format],r[this.type],e),this.bufferedFaces.indexOf(t)<0&&this.bufferedFaces.push(t),this.mipMap&&6===this.bufferedFaces.length&&r.generateMipmap(r.TEXTURE_CUBE_MAP),this.pop(),this},s.prototype.setParameters=function(t){var e=this.gl;this.push();var r=t.wrapS||t.wrap;if(r){if(!v[r])throw"Texture parameter `"+r+"` is not a valid value for `TEXTURE_WRAP_S`";this.wrapS=r,e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_WRAP_S,e[this.wrapS])}if(r=t.wrapT||t.wrap){if(!v[r])throw"Texture parameter `"+r+"` is not a valid value for `TEXTURE_WRAP_T`";this.wrapT=r,e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_WRAP_T,e[this.wrapT])}if(r=t.magFilter||t.filter){if(!d[r])throw"Texture parameter `"+r+"` is not a valid value for `TEXTURE_MAG_FILTER`";this.magFilter=r,e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e[this.magFilter])}if(r=t.minFilter||t.filter)if(this.mipMap){if(m[r]&&(r+=N),!y[r])throw"Texture parameter `"+r+"` is not a valid value for `TEXTURE_MIN_FILTER`";this.minFilter=r,e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e[this.minFilter])}else{if(!T[r])throw"Texture parameter `"+r+"` is not a valid value for `TEXTURE_MIN_FILTER`";this.minFilter=r,e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e[this.minFilter])}return this.pop(),this},e.exports=s}()},{"../util/Async":16,"../util/ImageLoader":17,"../util/Util":20,"./WebGLContext":13,"./WebGLContextState":14}],10:[function(t,e,r){!function(){"use strict";function r(t){var e=Object.keys(t);if(1===e.length)return 0;var r=0,i=0,n=0;return e.forEach(function(e){var o=t[e],s=o.byteOffset,a=o.size,f=o.type;i+=a*p[f],s>r&&(r=s,n=s+a*p[f])}),r>=i?0:n}function i(t){if(!t||0===Object.keys(t).length)throw"VertexBuffer requires attribute pointers to be specified upon instantiation";var e={};return Object.keys(t).forEach(function(r){var i=parseInt(r,10);if(isNaN(i))throw"Attribute index `"+r+"` does not represent an integer";var n=t[r],o=n.size,s=n.type,a=n.byteOffset;if(!l[o])throw"Attribute pointer `size` parameter is invalid, must be one of "+JSON.stringify(Object.keys(l));if(!h[s])throw"Attribute pointer `type` parameter is invalid, must be one of "+JSON.stringify(Object.keys(h));e[i]={size:o,type:s,byteOffset:void 0!==a?a:d}}),e}function n(t){var e=0;return Object.keys(t).forEach(function(r){e+=t[r].size}),e}function o(t,e,o){o=o||{};var h=this.gl=s.get();if(this.state=a.get(h),this.buffer=h.createBuffer(),this.mode=u[o.mode]?o.mode:E,this.count=void 0!==o.count?o.count:T,this.byteOffset=void 0!==o.byteOffset?o.byteOffset:d,this.byteLength=0,t instanceof f?(this.pointers=t.pointers,o=e||{}):this.pointers=i(e),this.byteStride=r(this.pointers),t)if(t instanceof f)this.bufferData(t.buffer);else if(t instanceof WebGLBuffer){if(void 0===o.byteLength)throw"Argument of type `WebGLBuffer` must be complimented with a corresponding `options.byteLength`";this.byteLength=o.byteLength,this.buffer=t}else this.bufferData(t);var p=c*n(this.pointers);if(this.count*p+this.byteOffset>this.byteLength)throw"VertexBuffer `count` of "+this.count+" and `byteOffset` of "+this.byteOffset+" overflows the total byte length of the buffer ("+this.byteLength+")"}var s=t("./WebGLContext"),a=t("./WebGLContextState"),f=t("./VertexPackage"),u={POINTS:!0,LINES:!0,LINE_STRIP:!0,LINE_LOOP:!0,TRIANGLES:!0,TRIANGLE_STRIP:!0,TRIANGLE_FAN:!0},h={FLOAT:!0},p={FLOAT:4},c=p.FLOAT,l={1:!0,2:!0,3:!0,4:!0},E="TRIANGLES",d=0,T=0;o.prototype.bufferData=function(t){var e=this.gl;if(t instanceof Array)t=new Float32Array(t);else if(!(t instanceof ArrayBuffer||t instanceof Float32Array||"number"==typeof t))throw"Argument must be of type `Array`, `ArrayBuffer`, `ArrayBufferView`, or `number`";if(this.count===T){var r=n(this.pointers);"number"==typeof t?this.count=t/c/r:this.count=t.length/r}if("number"==typeof t){if(t%c)throw"Byte length must be multiple of "+c;this.byteLength=t}else this.byteLength=t.length*c;e.bindBuffer(e.ARRAY_BUFFER,this.buffer),e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)},o.prototype.bufferSubData=function(t,e){var r=this.gl;if(0===this.byteLength)throw"Buffer has not yet been allocated";if(t instanceof Array)t=new Float32Array(t);else if(!(t instanceof ArrayBuffer||ArrayBuffer.isView(t)))throw"Argument must be of type `Array`, `ArrayBuffer`, or `ArrayBufferView`";e=void 0!==e?e:d;var i=t.length*c;if(e+i>this.byteLength)throw"Argument of length "+i+" bytes and offset of "+e+" bytes overflows the buffer length of "+this.byteLength+" bytes";return r.bindBuffer(r.ARRAY_BUFFER,this.buffer),r.bufferSubData(r.ARRAY_BUFFER,e,t),this},o.prototype.bind=function(){var t=this.gl,e=this.state;e.boundVertexBuffer!==this.buffer&&(t.bindBuffer(t.ARRAY_BUFFER,this.buffer),e.boundVertexBuffer=this.buffer);var r=this.pointers,i=this.byteStride;return Object.keys(r).forEach(function(n){var o=r[n];t.vertexAttribPointer(n,o.size,t[o.type],!1,i,o.byteOffset),e.enabledVertexAttributes[n]||(t.enableVertexAttribArray(n),e.enabledVertexAttributes[n]=!0)}),this},o.prototype.unbind=function(){var t=this.gl,e=this.state;return e.boundVertexBuffer!==this.buffer&&(t.bindBuffer(t.ARRAY_BUFFER,this.buffer),e.boundVertexBuffer=this.buffer),Object.keys(this.pointers).forEach(function(r){e.enabledVertexAttributes[r]&&(t.disableVertexAttribArray(r),e.enabledVertexAttributes[r]=!1)}),this},o.prototype.draw=function(t){if(t=t||{},this.state.boundVertexBuffer!==this.buffer)throw"Attempting to draw an unbound VertexBuffer";var e=this.gl,r=e[t.mode||this.mode],i=void 0!==t.byteOffset?t.byteOffset:this.byteOffset,o=void 0!==t.count?t.count:this.count;if(0===o)throw"Attempting to draw with a count of 0";var s=c*n(this.pointers);if(o*s+i>this.byteLength)throw"Attempting to draw with `count` of "+o+" and `offset` of "+i+" overflows the total byte length of the buffer ("+this.byteLength+")";return e.drawArrays(r,i,o),this},e.exports=o}()},{"./VertexPackage":11,"./WebGLContext":13,"./WebGLContextState":14}],11:[function(t,e,r){!function(){"use strict";function r(t){var e=[];return Object.keys(t).forEach(function(r){var i=parseFloat(r);if(!h.isInteger(i)||0>i)throw"Attribute index `"+r+"` does not represent a valid integer";var n=t[r];if(!(n&&n instanceof Array&&n.length>0))throw"Error parsing attribute of index `"+r+"`";e.push({index:i,data:n})}),e.sort(function(t,e){return t.index-e.index}),e}function i(t){return void 0!==t.x?void 0!==t.y?void 0!==t.z?void 0!==t.w?4:3:2:1:t instanceof Array?t.length:1;
}function n(t,e){var r=Number.MAX_VALUE,n=0;t.pointers={},e.forEach(function(e){var o=i(e.data[0]);r=Math.min(r,e.data.length),t.pointers[e.index]={type:p,size:o,byteOffset:n*c},n+=o}),t.byteStride=n*c,t.length=r}function o(t,e,r,i,n){var o,s,a;for(s=0;r>s;s++)o=e[s],a=i+n*s,void 0!==o.x?t[a]=o.x:void 0!==o[0]?t[a]=o[0]:t[a]=o}function s(t,e,r,i,n){var o,s,a;for(s=0;r>s;s++)o=e[s],a=i+n*s,t[a]=void 0!==o.x?o.x:o[0],t[a+1]=void 0!==o.y?o.y:o[1]}function a(t,e,r,i,n){var o,s,a;for(s=0;r>s;s++)o=e[s],a=i+n*s,t[a]=void 0!==o.x?o.x:o[0],t[a+1]=void 0!==o.y?o.y:o[1],t[a+2]=void 0!==o.z?o.z:o[2]}function f(t,e,r,i,n){var o,s,a;for(s=0;r>s;s++)o=e[s],a=i+n*s,t[a]=void 0!==o.x?o.x:o[0],t[a+1]=void 0!==o.y?o.y:o[1],t[a+2]=void 0!==o.z?o.z:o[2],t[a+3]=void 0!==o.w?o.w:o[3]}function u(t){void 0!==t?this.set(t):(this.buffer=new Float32Array(0),this.pointers={})}var h=t("../util/Util"),p="FLOAT",c=4;u.prototype.set=function(t){t=r(t),n(this,t);var e=this.length,i=this.byteStride/c,u=this.pointers,h=this.buffer=new Float32Array(e*i);return t.forEach(function(t){var r=u[t.index],n=r.byteOffset/c;switch(r.size){case 2:s(h,t.data,e,n,i);break;case 3:a(h,t.data,e,n,i);break;case 4:f(h,t.data,e,n,i);break;default:o(h,t.data,e,n,i)}}),this},e.exports=u}()},{"../util/Util":20}],12:[function(t,e,r){!function(){"use strict";function r(t,e,r,i,n){var o=t.gl;e=void 0!==e?e:0,r=void 0!==r?r:0,i=void 0!==i?i:t.width,n=void 0!==n?n:t.height,o.viewport(e,r,i,n)}function i(t){t=t||{},this.gl=n.get(),this.state=o.get(this.gl),this.resize(t.width||this.gl.canvas.width,t.height||this.gl.canvas.height)}var n=t("./WebGLContext"),o=t("./WebGLContextState");i.prototype.resize=function(t,e){if("number"!=typeof t||0>=t)throw"Provided `width` of "+t+" is invalid";if("number"!=typeof e||0>=e)throw"Provided `height` of "+e+" is invalid";return this.width=t,this.height=e,this.gl.canvas.width=t,this.gl.canvas.height=e,this},i.prototype.push=function(t,e,i,n){if(void 0!==t&&"number"!=typeof t)throw"Provided `x` of "+t+" is invalid";if(void 0!==e&&"number"!=typeof e)throw"Provided `y` of "+e+" is invalid";if(void 0!==i&&("number"!=typeof i||0>=i))throw"Provided `width` of "+i+" is invalid";if(void 0!==n&&("number"!=typeof n||0>=n))throw"Provided `height` of "+n+" is invalid";return this.state.viewports.push({viewport:this,x:t,y:e,width:i,height:n}),r(this,t,e,i,n),this},i.prototype.pop=function(){var t=this.state,e=t.viewports.top();if(!e||this!==e.viewport)throw"Viewport is not the top most element on the stack";return t.viewports.pop(),e=t.viewports.top(),e?r(e.viewport,e.x,e.y,e.width,e.height):r(this),this},e.exports=i}()},{"./WebGLContext":13,"./WebGLContextState":14}],13:[function(t,e,r){!function(){"use strict";function t(){var t=function(t){var e=16*Math.random()|0,r="x"===t?e:3&e|8;return r.toString(16)};return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t)}function r(e){return e.id||(e.id=t()),e.id}function i(t){return t instanceof HTMLCanvasElement?t:"string"==typeof t?document.getElementById(t)||document.querySelector(t):null}function n(t){if(void 0===t){if(f)return f}else{var e=i(t);if(e)return u[r(e)]}return null}function o(t){var e=t.gl;a.forEach(function(r){t.extensions[r]=e.getExtension(r)})}function s(t,e){var i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),n={id:r(t),gl:i,extensions:{}};return o(n),u[r(t)]=n,f=n,n}var a=["OES_texture_float","OES_texture_half_float","WEBGL_lose_context","OES_standard_derivatives","OES_vertex_array_object","WEBGL_debug_renderer_info","WEBGL_debug_shaders","WEBGL_compressed_texture_s3tc","WEBGL_depth_texture","OES_element_index_uint","EXT_texture_filter_anisotropic","EXT_frag_depth","WEBGL_draw_buffers","ANGLE_instanced_arrays","OES_texture_float_linear","OES_texture_half_float_linear","EXT_blend_minmax","EXT_shader_texture_lod","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_pvrtc","EXT_color_buffer_half_float","WEBGL_color_buffer_float","EXT_sRGB","WEBGL_compressed_texture_etc1"],f=null,u={};e.exports={bind:function(t){var e=n(t);if(e)return f=e,this;throw"No context exists for provided argument `"+t+"`"},get:function(t,e){var r=n(t);if(r)return r.gl;var o=i(t);if(!o)throw"Context could not be associated with argument of type `"+typeof t+"`";return s(o,e).gl},remove:function(t){var e=n(t);if(!e)throw"Context could not be found or deleted for argument of type `"+typeof t+"`";delete u[e.id],e===f&&(f=null)},supportedExtensions:function(t){var e=n(t);if(e){var r=e.extensions,i=[];return Object.keys(r).forEach(function(t){r[t]&&i.push(t)}),i}throw"No context is currently bound or could be associated with the provided argument"},unsupportedExtensions:function(t){var e=n(t);if(e){var r=e.extensions,i=[];return Object.keys(r).forEach(function(t){r[t]||i.push(t)}),i}throw"No context is currently bound or could be associated with the provided argument"},checkExtension:function(t,e){e||(e=t,t=void 0);var r=n(t);if(r){var i=r.extensions;return!!i[e]}throw"No context is currently bound or could be associated with the provided argument"}}}()},{}],14:[function(t,e,r){!function(){"use strict";function r(){this.boundVertexBuffer=null,this.enabledVertexAttributes={0:!1,1:!1,2:!1,3:!1,4:!1,5:!1},this.boundIndexBuffer=null,this.shaders=new i,this.viewports=new i,this.renderTargets=new i,this.texture2Ds=new n,this.textureCubeMaps=new n}var i=t("../util/Stack"),n=t("../util/StackMap"),o={};e.exports={get:function(t){var e=t.canvas.id;return o[e]||(o[e]=new r),o[e]}}}()},{"../util/Stack":18,"../util/StackMap":19}],15:[function(t,e,r){!function(){"use strict";e.exports={IndexBuffer:t("./core/IndexBuffer"),Renderable:t("./core/Renderable"),RenderTarget:t("./core/RenderTarget"),Shader:t("./core/Shader"),Texture2D:t("./core/Texture2D"),ColorTexture2D:t("./core/ColorTexture2D"),DepthTexture2D:t("./core/DepthTexture2D"),TextureCubeMap:t("./core/TextureCubeMap"),VertexBuffer:t("./core/VertexBuffer"),VertexPackage:t("./core/VertexPackage"),Viewport:t("./core/Viewport"),WebGLContext:t("./core/WebGLContext")}}()},{"./core/ColorTexture2D":1,"./core/DepthTexture2D":2,"./core/IndexBuffer":3,"./core/RenderTarget":4,"./core/Renderable":5,"./core/Shader":6,"./core/Texture2D":8,"./core/TextureCubeMap":9,"./core/VertexBuffer":10,"./core/VertexPackage":11,"./core/Viewport":12,"./core/WebGLContext":13}],16:[function(t,e,r){!function(){"use strict";function t(t){var e,r=-1;if(Array.isArray(t))return e=t.length,function(){return r++,e>r?r:null};var i=Object.keys(t);return e=i.length,function(){return r++,e>r?i[r]:null}}function r(t){return function(){null!==t&&(t.apply(this,arguments),t=null)}}function i(e,i,n){function o(t){a--,t?n(t):null===s&&0>=a&&n(null)}n=r(n);for(var s,a=0,f=t(e);null!==(s=f());)a+=1,i(e[s],s,o);0===a&&n(null)}e.exports={parallel:function(t,e){var r=Array.isArray(t)?[]:{};i(t,function(t,e,i){t(function(t,n){r[e]=n,i(t)})},function(t){e(t,r)})}}}()},{}],17:[function(t,e,r){!function(){"use strict";e.exports={load:function(t){var e=new Image;e.onload=function(){t.success&&t.success(e)},e.onerror=function(e){if(t.error){var r="Unable to load image from URL: `"+e.path[0].currentSrc+"`";t.error(r)}},e.src=t.url}}}()},{}],18:[function(t,e,r){!function(){"use strict";function t(){this.data=[]}t.prototype.push=function(t){return this.data.push(t),this},t.prototype.pop=function(){return this.data.pop()},t.prototype.top=function(){var t=this.data.length-1;if(!(0>t))return this.data[t]},e.exports=t}()},{}],19:[function(t,e,r){!function(){"use strict";function r(){this.stacks={}}var i=t("./Stack");r.prototype.push=function(t,e){return this.stacks[t]||(this.stacks[t]=new i),this.stacks[t].push(e),this},r.prototype.pop=function(t){return this.stacks[t]?this.stacks[t].pop():void 0},r.prototype.top=function(t){return this.stacks[t]?this.stacks[t].top():void 0},e.exports=r}()},{"./Stack":18}],20:[function(t,e,r){!function(){"use strict";var t={};t.isArrayType=function(t){return t instanceof Array||t instanceof ArrayBuffer||ArrayBuffer.isView(t)},t.isCanvasType=function(t){return t instanceof ImageData||t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement},t.mustBePowerOfTwo=function(t){return t.mipMap||"REPEAT"===t.wrapS||"MIRRORED_REPEAT"===t.wrapS||"REPEAT"===t.wrapT||"MIRRORED_REPEAT"===t.wrapT},t.isInteger=function(t){return"number"==typeof t&&t%1===0},t.isPowerOfTwo=function(t){return 0!==t?0===(t&t-1):!1},t.nextHighestPowerOfTwo=function(t){var e;for(0!==t&&(t-=1),e=1;32>e;e<<=1)t|=t>>e;return t+1},t.resizeCanvas=function(e,r){if(!t.mustBePowerOfTwo(e)||t.isPowerOfTwo(r.width)&&t.isPowerOfTwo(r.height))return r;var i=document.createElement("canvas");i.width=t.nextHighestPowerOfTwo(r.width),i.height=t.nextHighestPowerOfTwo(r.height);var n=i.getContext("2d");return n.drawImage(r,0,0,r.width,r.height,0,0,i.width,i.height),i},e.exports=t}()},{}],21:[function(t,e,r){!function(){"use strict";e.exports={load:function(t){var e=new XMLHttpRequest;e.open("GET",t.url,!0),e.responseType=t.responseType,e.onreadystatechange=function(){4===e.readyState&&(200===e.status?t.success&&t.success(e.response):t.error&&t.error("GET "+e.responseURL+" "+e.status+" ("+e.statusText+")"))},e.send()}}}()},{}]},{},[15])(15)});
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).esper=e()}}(function(){return function e(t,r,n){function i(a,u){if(!r[a]){if(!t[a]){var f="function"==typeof require&&require;if(!u&&f)return f(a,!0);if(o)return o(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var c=r[a]={exports:{}};t[a][0].call(c.exports,function(e){var r=t[a][1][e];return i(r||e)},c,c.exports,e,t,r,n)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return(0,f.default)(function(t,r){var n;try{n=e.apply(this,t)}catch(e){return r(e)}(0,u.default)(n)&&"function"==typeof n.then?n.then(function(e){o(r,null,e)},function(e){o(r,e.message?e:new Error(e))}):r(null,n)})}function o(e,t,r){try{e(t,r)}catch(e){(0,s.default)(a,e)}}function a(e){throw e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=i;var u=n(e("lodash/isObject")),f=n(e("./internal/initialParams")),s=n(e("./internal/setImmediate"));t.exports=r.default},{"./internal/initialParams":8,"./internal/setImmediate":13,"lodash/isObject":40}],2:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r){function n(e,t){e?r(e):++o!==u&&t!==a.default||r(null)}r=(0,c.default)(r||s.default);var i=0,o=0,u=e.length;for(0===u&&r(null);i<u;i++)t(e[i],i,(0,l.default)(n))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t,r){((0,o.default)(e)?i:d)(e,(0,h.default)(t),r)};var o=n(e("lodash/isArrayLike")),a=n(e("./internal/breakLoop")),u=n(e("./eachOfLimit")),f=n(e("./internal/doLimit")),s=n(e("lodash/noop")),c=n(e("./internal/once")),l=n(e("./internal/onlyOnce")),h=n(e("./internal/wrapAsync")),d=(0,f.default)(u.default,1/0);t.exports=r.default},{"./eachOfLimit":3,"./internal/breakLoop":4,"./internal/doLimit":5,"./internal/once":10,"./internal/onlyOnce":11,"./internal/wrapAsync":15,"lodash/isArrayLike":36,"lodash/noop":44}],3:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r,n){(0,o.default)(t)(e,(0,a.default)(r),n)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=i;var o=n(e("./internal/eachOfLimit")),a=n(e("./internal/wrapAsync"));t.exports=r.default},{"./internal/eachOfLimit":6,"./internal/wrapAsync":15}],4:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={},t.exports=r.default},{}],5:[function(e,t,r){"use strict";function n(e,t){return function(r,n,i){return e(r,t,n,i)}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n,t.exports=r.default},{}],6:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return function(t,r,n){function i(e,t){if(d-=1,e)h=!0,n(e);else{if(t===s.default||h&&d<=0)return h=!0,n(null);c()}}function c(){for(;d<e&&!h;){var t=l();if(null===t)return h=!0,void(d<=0&&n(null));d+=1,r(t.value,t.key,(0,f.default)(i))}}if(n=(0,a.default)(n||o.default),e<=0||!t)return n(null);var l=(0,u.default)(t),h=!1,d=0;c()}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=i;var o=n(e("lodash/noop")),a=n(e("./once")),u=n(e("./iterator")),f=n(e("./onlyOnce")),s=n(e("./breakLoop"));t.exports=r.default},{"./breakLoop":4,"./iterator":9,"./once":10,"./onlyOnce":11,"lodash/noop":44}],7:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return n&&e[n]&&e[n]()};var n="function"==typeof Symbol&&Symbol.iterator;t.exports=r.default},{}],8:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return function(){var t=(0,n.default)(arguments),r=t.pop();e.call(this,t,r)}};var n=function(e){return e&&e.__esModule?e:{default:e}}(e("./slice"));t.exports=r.default},{"./slice":14}],9:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=-1,r=e.length;return function(){return++t<r?{value:e[t],key:t}:null}}function o(e){var t=-1;return function(){var r=e.next();return r.done?null:(t++,{value:r.value,key:t})}}function a(e){var t=(0,c.default)(e),r=-1,n=t.length;return function(){var i=t[++r];return r<n?{value:e[i],key:i}:null}}function u(e){if((0,f.default)(e))return i(e);var t=(0,s.default)(e);return t?o(t):a(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=u;var f=n(e("lodash/isArrayLike")),s=n(e("./getIterator")),c=n(e("lodash/keys"));t.exports=r.default},{"./getIterator":7,"lodash/isArrayLike":36,"lodash/keys":43}],10:[function(e,t,r){"use strict";function n(e){return function(){if(null!==e){var t=e;e=null,t.apply(this,arguments)}}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n,t.exports=r.default},{}],11:[function(e,t,r){"use strict";function n(e){return function(){if(null===e)throw new Error("Callback was already called.");var t=e;e=null,t.apply(this,arguments)}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n,t.exports=r.default},{}],12:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r){r=r||o.default;var n=(0,a.default)(t)?[]:{};e(t,function(e,t,r){(0,f.default)(e)(function(e,i){arguments.length>2&&(i=(0,u.default)(arguments,1)),n[t]=i,r(e)})},function(e){r(e,n)})}Object.defineProperty(r,"__esModule",{value:!0}),r.default=i;var o=n(e("lodash/noop")),a=n(e("lodash/isArrayLike")),u=n(e("./slice")),f=n(e("./wrapAsync"));t.exports=r.default},{"./slice":14,"./wrapAsync":15,"lodash/isArrayLike":36,"lodash/noop":44}],13:[function(e,t,r){(function(t){"use strict";function n(e){setTimeout(e,0)}function i(e){return function(t){var r=(0,a.default)(arguments,1);e(function(){t.apply(null,r)})}}Object.defineProperty(r,"__esModule",{value:!0}),r.hasNextTick=r.hasSetImmediate=void 0,r.fallback=n,r.wrap=i;var o,a=function(e){return e&&e.__esModule?e:{default:e}}(e("./slice")),u=r.hasSetImmediate="function"==typeof setImmediate&&setImmediate,f=r.hasNextTick="object"==typeof t&&"function"==typeof t.nextTick;o=u?setImmediate:f?t.nextTick:n,r.default=i(o)}).call(this,e("_process"))},{"./slice":14,_process:46}],14:[function(e,t,r){"use strict";function n(e,t){t|=0;for(var r=Math.max(e.length-t,0),n=Array(r),i=0;i<r;i++)n[i]=e[t+i];return n}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n,t.exports=r.default},{}],15:[function(e,t,r){"use strict";function n(e){return a&&"AsyncFunction"===e[Symbol.toStringTag]}function i(e){return n(e)?(0,o.default)(e):e}Object.defineProperty(r,"__esModule",{value:!0}),r.isAsync=void 0;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("../asyncify")),a="function"==typeof Symbol;r.default=i,r.isAsync=n},{"../asyncify":1}],16:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){(0,a.default)(o.default,e,t)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=i;var o=n(e("./eachOf")),a=n(e("./internal/parallel"));t.exports=r.default},{"./eachOf":2,"./internal/parallel":12}],17:[function(e,t,r){var n=e("./_root").Symbol;t.exports=n},{"./_root":33}],18:[function(e,t,r){function n(e,t){var r=a(e),n=!r&&o(e),l=!r&&!n&&u(e),h=!r&&!n&&!l&&s(e),d=r||n||l||h,p=d?i(e.length,String):[],E=p.length;for(var v in e)!t&&!c.call(e,v)||d&&("length"==v||l&&("offset"==v||"parent"==v)||h&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||f(v,E))||p.push(v);return p}var i=e("./_baseTimes"),o=e("./isArguments"),a=e("./isArray"),u=e("./isBuffer"),f=e("./_isIndex"),s=e("./isTypedArray"),c=Object.prototype.hasOwnProperty;t.exports=n},{"./_baseTimes":23,"./_isIndex":27,"./isArguments":34,"./isArray":35,"./isBuffer":37,"./isTypedArray":42}],19:[function(e,t,r){function n(e){return null==e?void 0===e?f:u:s&&s in Object(e)?o(e):a(e)}var i=e("./_Symbol"),o=e("./_getRawTag"),a=e("./_objectToString"),u="[object Null]",f="[object Undefined]",s=i?i.toStringTag:void 0;t.exports=n},{"./_Symbol":17,"./_getRawTag":26,"./_objectToString":31}],20:[function(e,t,r){function n(e){return o(e)&&i(e)==a}var i=e("./_baseGetTag"),o=e("./isObjectLike"),a="[object Arguments]";t.exports=n},{"./_baseGetTag":19,"./isObjectLike":41}],21:[function(e,t,r){function n(e){return a(e)&&o(e.length)&&!!u[i(e)]}var i=e("./_baseGetTag"),o=e("./isLength"),a=e("./isObjectLike"),u={};u["[object Float32Array]"]=u["[object Float64Array]"]=u["[object Int8Array]"]=u["[object Int16Array]"]=u["[object Int32Array]"]=u["[object Uint8Array]"]=u["[object Uint8ClampedArray]"]=u["[object Uint16Array]"]=u["[object Uint32Array]"]=!0,u["[object Arguments]"]=u["[object Array]"]=u["[object ArrayBuffer]"]=u["[object Boolean]"]=u["[object DataView]"]=u["[object Date]"]=u["[object Error]"]=u["[object Function]"]=u["[object Map]"]=u["[object Number]"]=u["[object Object]"]=u["[object RegExp]"]=u["[object Set]"]=u["[object String]"]=u["[object WeakMap]"]=!1,t.exports=n},{"./_baseGetTag":19,"./isLength":39,"./isObjectLike":41}],22:[function(e,t,r){function n(e){if(!i(e))return o(e);var t=[];for(var r in Object(e))a.call(e,r)&&"constructor"!=r&&t.push(r);return t}var i=e("./_isPrototype"),o=e("./_nativeKeys"),a=Object.prototype.hasOwnProperty;t.exports=n},{"./_isPrototype":28,"./_nativeKeys":29}],23:[function(e,t,r){function n(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}t.exports=n},{}],24:[function(e,t,r){function n(e){return function(t){return e(t)}}t.exports=n},{}],25:[function(e,t,r){(function(e){var r="object"==typeof e&&e&&e.Object===Object&&e;t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],26:[function(e,t,r){function n(e){var t=a.call(e,f),r=e[f];try{e[f]=void 0;var n=!0}catch(e){}var i=u.call(e);return n&&(t?e[f]=r:delete e[f]),i}var i=e("./_Symbol"),o=Object.prototype,a=o.hasOwnProperty,u=o.toString,f=i?i.toStringTag:void 0;t.exports=n},{"./_Symbol":17}],27:[function(e,t,r){function n(e,t){return!!(t=null==t?i:t)&&("number"==typeof e||o.test(e))&&e>-1&&e%1==0&&e<t}var i=9007199254740991,o=/^(?:0|[1-9]\d*)$/;t.exports=n},{}],28:[function(e,t,r){function n(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||i)}var i=Object.prototype;t.exports=n},{}],29:[function(e,t,r){var n=e("./_overArg")(Object.keys,Object);t.exports=n},{"./_overArg":32}],30:[function(e,t,r){var n=e("./_freeGlobal"),i="object"==typeof r&&r&&!r.nodeType&&r,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=o&&o.exports===i&&n.process,u=function(){try{return a&&a.binding&&a.binding("util")}catch(e){}}();t.exports=u},{"./_freeGlobal":25}],31:[function(e,t,r){function n(e){return i.call(e)}var i=Object.prototype.toString;t.exports=n},{}],32:[function(e,t,r){function n(e,t){return function(r){return e(t(r))}}t.exports=n},{}],33:[function(e,t,r){var n=e("./_freeGlobal"),i="object"==typeof self&&self&&self.Object===Object&&self,o=n||i||Function("return this")();t.exports=o},{"./_freeGlobal":25}],34:[function(e,t,r){var n=e("./_baseIsArguments"),i=e("./isObjectLike"),o=Object.prototype,a=o.hasOwnProperty,u=o.propertyIsEnumerable,f=n(function(){return arguments}())?n:function(e){return i(e)&&a.call(e,"callee")&&!u.call(e,"callee")};t.exports=f},{"./_baseIsArguments":20,"./isObjectLike":41}],35:[function(e,t,r){var n=Array.isArray;t.exports=n},{}],36:[function(e,t,r){function n(e){return null!=e&&o(e.length)&&!i(e)}var i=e("./isFunction"),o=e("./isLength");t.exports=n},{"./isFunction":38,"./isLength":39}],37:[function(e,t,r){var n=e("./_root"),i=e("./stubFalse"),o="object"==typeof r&&r&&!r.nodeType&&r,a=o&&"object"==typeof t&&t&&!t.nodeType&&t,u=a&&a.exports===o?n.Buffer:void 0,f=(u?u.isBuffer:void 0)||i;t.exports=f},{"./_root":33,"./stubFalse":45}],38:[function(e,t,r){function n(e){if(!o(e))return!1;var t=i(e);return t==u||t==f||t==a||t==s}var i=e("./_baseGetTag"),o=e("./isObject"),a="[object AsyncFunction]",u="[object Function]",f="[object GeneratorFunction]",s="[object Proxy]";t.exports=n},{"./_baseGetTag":19,"./isObject":40}],39:[function(e,t,r){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}var i=9007199254740991;t.exports=n},{}],40:[function(e,t,r){function n(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}t.exports=n},{}],41:[function(e,t,r){function n(e){return null!=e&&"object"==typeof e}t.exports=n},{}],42:[function(e,t,r){var n=e("./_baseIsTypedArray"),i=e("./_baseUnary"),o=e("./_nodeUtil"),a=o&&o.isTypedArray,u=a?i(a):n;t.exports=u},{"./_baseIsTypedArray":21,"./_baseUnary":24,"./_nodeUtil":30}],43:[function(e,t,r){function n(e){return a(e)?i(e):o(e)}var i=e("./_arrayLikeKeys"),o=e("./_baseKeys"),a=e("./isArrayLike");t.exports=n},{"./_arrayLikeKeys":18,"./_baseKeys":22,"./isArrayLike":36}],44:[function(e,t,r){function n(){}t.exports=n},{}],45:[function(e,t,r){function n(){return!1}t.exports=n},{}],46:[function(e,t,r){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function a(e){if(h===clearTimeout)return clearTimeout(e);if((h===i||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(e);try{return h(e)}catch(t){try{return h.call(null,e)}catch(t){return h.call(this,e)}}}function u(){v&&p&&(v=!1,p.length?E=p.concat(E):y=-1,E.length&&f())}function f(){if(!v){var e=o(u);v=!0;for(var t=E.length;t;){for(p=E,E=[];++y<t;)p&&p[y].run();y=-1,t=E.length}p=null,v=!1,a(e)}}function s(e,t){this.fun=e,this.array=t}function c(){}var l,h,d=t.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{h="function"==typeof clearTimeout?clearTimeout:i}catch(e){h=i}}();var p,E=[],v=!1,y=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];E.push(new s(e,t)),1!==E.length||v||o(f)},s.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.prependListener=c,d.prependOnceListener=c,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},{}],47:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=e("./Texture2D"),u=e("../util/ImageLoader"),f=e("../util/Util"),s={NEAREST:!0,LINEAR:!0},c={NEAREST:!0,LINEAR:!0,NEAREST_MIPMAP_NEAREST:!0,LINEAR_MIPMAP_NEAREST:!0,NEAREST_MIPMAP_LINEAR:!0,LINEAR_MIPMAP_LINEAR:!0},l={REPEAT:!0,MIRRORED_REPEAT:!0,CLAMP_TO_EDGE:!0},h={UNSIGNED_BYTE:!0,FLOAT:!0},d={RGB:!0,RGBA:!0},p="UNSIGNED_BYTE",E="RGBA",v="REPEAT",y="LINEAR",T=!0,m=!0,_=!0,b=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(n(this,t),e.wrapS=e.wrapS||e.wrap,e.wrapT=e.wrapT||e.wrap,e.minFilter=e.minFilter||e.filter,e.magFilter=e.magFilter||e.filter,e.wrapS=l[e.wrapS]?e.wrapS:v,e.wrapT=l[e.wrapT]?e.wrapT:v,e.minFilter=c[e.minFilter]?e.minFilter:y,e.magFilter=s[e.magFilter]?e.magFilter:y,e.mipMap=void 0!==e.mipMap?e.mipMap:m,e.invertY=void 0!==e.invertY?e.invertY:_,e.premultiplyAlpha=void 0!==e.premultiplyAlpha?e.premultiplyAlpha:T,e.format=d[e.format]?e.format:E,"string"==typeof e.src){e.type="UNSIGNED_BYTE";o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));u.load({url:e.src,success:function(t){t=f.resizeCanvas(e,t),o.bufferData(t,e.width,e.height),o.setParameters(o),r&&r(null,o)},error:function(e){r&&r(e,null)}})}else if(f.isCanvasType(e.src)){e.type="UNSIGNED_BYTE",e.src=f.resizeCanvas(e,e.src);o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}else{void 0!==e.src&&null!==e.src||(e.mipMap=!1),e.type=h[e.type]?e.type:p;var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(o)}return o(t,e),t}(a);t.exports=b},{"../util/ImageLoader":62,"../util/Util":63,"./Texture2D":55}],48:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a={NEAREST:!0,LINEAR:!0},u={NEAREST:!0,LINEAR:!0},f={REPEAT:!0,CLAMP_TO_EDGE:!0,MIRRORED_REPEAT:!0},s={UNSIGNED_BYTE:!0,UNSIGNED_SHORT:!0,UNSIGNED_INT:!0},c={DEPTH_COMPONENT:!0,DEPTH_STENCIL:!0},l="UNSIGNED_INT",h="DEPTH_COMPONENT",d="CLAMP_TO_EDGE",p="LINEAR",E=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n(this,t),e.wrapS=e.wrapS||e.wrap,e.wrapT=e.wrapT||e.wrap,e.minFilter=e.minFilter||e.filter,e.magFilter=e.magFilter||e.filter,e.wrapS=f[e.wrapS]?e.wrapS:d,e.wrapT=f[e.wrapT]?e.wrapT:d,e.minFilter=u[e.minFilter]?e.minFilter:p,e.magFilter=a[e.magFilter]?e.magFilter:p,e.mipMap=!1,e.invertY=!1,e.premultiplyAlpha=!1,e.format=c[e.format]?e.format:h,"DEPTH_STENCIL"===e.format?e.type="UNSIGNED_INT_24_8_WEBGL":e.type=s[e.type]?e.type:l,i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),t}(e("./Texture2D"));t.exports=E},{"./Texture2D":55}],49:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=e("./WebGLContext"),a={UNSIGNED_BYTE:!0,UNSIGNED_SHORT:!0,UNSIGNED_INT:!0},u={POINTS:!0,LINES:!0,LINE_STRIP:!0,LINE_LOOP:!0,TRIANGLES:!0,TRIANGLE_STRIP:!0,TRIANGLE_FAN:!0},f={UNSIGNED_BYTE:1,UNSIGNED_SHORT:2,UNSIGNED_INT:4},s="UNSIGNED_SHORT",c="TRIANGLES",l=0,h=0,d=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n(this,e),this.gl=o.get(),this.buffer=null,this.type=a[r.type]?r.type:s,this.mode=u[r.mode]?r.mode:c,this.count=void 0!==r.count?r.count:h,this.byteOffset=void 0!==r.byteOffset?r.byteOffset:l,t)if(t instanceof WebGLBuffer)this.buffer=t;else if(Number.isInteger(t)){if(void 0===r.type)throw"Argument of type `number` must be complimented with a corresponding `options.type`";this.bufferData(t)}else if(t instanceof ArrayBuffer){if(void 0===r.type)throw"Argument of type `ArrayBuffer` must be complimented with a corresponding `options.type`";this.bufferData(t)}else this.bufferData(t);else if(void 0===r.type)throw"Empty buffer must be complimented with a corresponding `options.type`"}return i(e,[{key:"bufferData",value:function(e){var t=this.gl;if(Array.isArray(e))e="UNSIGNED_INT"===this.type?new Uint32Array(e):"UNSIGNED_SHORT"===this.type?new Uint16Array(e):new Uint8Array(e);else if(e instanceof Uint32Array)this.type="UNSIGNED_INT";else if(e instanceof Uint16Array)this.type="UNSIGNED_SHORT";else if(e instanceof Uint8Array)this.type="UNSIGNED_BYTE";else if(!(e instanceof ArrayBuffer||Number.isInteger(e)))throw"Argument must be of type `Array`, `ArrayBuffer`, `ArrayBufferView`, or `number`";if("UNSIGNED_INT"===this.type&&!o.checkExtension("OES_element_index_uint"))throw"Cannot create IndexBuffer of type `UNSIGNED_INT` as extension `OES_element_index_uint` is not supported";return this.count===h&&(Number.isInteger(e)?this.count=e/f[this.type]:this.count=e.length),this.buffer||(this.buffer=t.createBuffer()),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.buffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW),this}},{key:"bufferSubData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l,r=this.gl;if(!this.buffer)throw"Buffer has not yet been allocated, allocate with `bufferData`";if(Array.isArray(e))e="UNSIGNED_INT"===this.type?new Uint32Array(e):"UNSIGNED_SHORT"===this.type?new Uint16Array(e):new Uint8Array(e);else if(!(e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof ArrayBuffer))throw"Argument must be of type `Array`, `ArrayBuffer`, or `ArrayBufferView`";return r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,this.buffer),r.bufferSubData(r.ELEMENT_ARRAY_BUFFER,t,e),this}},{key:"draw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.gl,r=t[e.mode||this.mode],n=t[this.type],i=void 0!==e.byteOffset?e.byteOffset:this.byteOffset,o=void 0!==e.count?e.count:this.count;if(0===o)throw"Attempting to draw with a count of 0";return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.buffer),t.drawElements(r,o,n,i),this}}]),e}();t.exports=d},{"./WebGLContext":60}],50:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=e("./WebGLContext"),a={TEXTURE_2D:!0,TEXTURE_CUBE_MAP:!0},u={DEPTH_COMPONENT:!0,DEPTH_STENCIL:!0},f=function(){function e(){n(this,e),this.gl=o.get(),this.framebuffer=this.gl.createFramebuffer(),this.textures=new Map}return i(e,[{key:"bind",value:function(){var e=this.gl;return e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer),this}},{key:"unbind",value:function(){var e=this.gl;return e.bindFramebuffer(e.FRAMEBUFFER,null),this}},{key:"setColorTarget",value:function(e,t,r){var n=this.gl;if(!e)throw"Texture argument is missing";if(a[t]&&void 0===r&&(r=t,t=0),void 0===t)t=0;else if(!Number.isInteger(t)||t<0)throw"Texture color attachment index is invalid";if(r&&!a[r])throw"Texture target is invalid";return this.textures.set("color_"+t,e),this.bind(),n.framebufferTexture2D(n.FRAMEBUFFER,n["COLOR_ATTACHMENT"+t],n[r||"TEXTURE_2D"],e.texture,0),this.unbind(),this}},{key:"setDepthTarget",value:function(e){if(!e)throw"Texture argument is missing";if(!u[e.format])throw"Provided texture is not of format `DEPTH_COMPONENT` or `DEPTH_STENCIL`";var t=this.gl;return this.textures.set("depth",e),this.bind(),t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,e.texture,0),this.unbind(),this}},{key:"resize",value:function(e,t){if("number"!=typeof e||e<=0)throw"Provided `width` of "+e+" is invalid";if("number"!=typeof t||t<=0)throw"Provided `height` of "+t+" is invalid";return this.textures.forEach(function(r){r.resize(e,t)}),this}}]),e}();t.exports=f},{"./WebGLContext":60}],51:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){var t=null;e.forEach(function(e){if(null===t)t=e.count;else if(t!==e.count)throw"VertexBuffers must all have the same count to be rendered without an IndexBuffer, mismatch of "+t+" and "+e.count+" found"})}function o(e){var t=new Map;e.forEach(function(e){e.pointers.forEach(function(e,r){var n=t.get(r)||0;t.set(r,n+1)})}),t.forEach(function(e){if(e>1)throw"More than one attribute pointer exists for index `"+e+"`"})}var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("./VertexPackage"),f=e("./VertexBuffer"),s=e("./IndexBuffer"),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(n(this,e),t.vertexBuffer||t.vertexBuffers)this.vertexBuffers=t.vertexBuffers||[t.vertexBuffer];else if(t.vertices){var r=new u(t.vertices);this.vertexBuffers=[new f(r.buffer,r.pointers)]}else this.vertexBuffers=[];t.indexBuffer?this.indexBuffer=t.indexBuffer:t.indices?this.indexBuffer=new s(t.indices):this.indexBuffer=null,this.indexBuffer||i(this.vertexBuffers),o(this.vertexBuffers)}return a(e,[{key:"draw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.indexBuffer?(this.vertexBuffers.forEach(function(e){e.bind()}),this.indexBuffer.draw(e),this.vertexBuffers.forEach(function(e){e.unbind()})):(this.vertexBuffers.forEach(function(e){e.bind()}),this.vertexBuffers.length>0&&this.vertexBuffers[0].draw(e),this.vertexBuffers.forEach(function(e){e.unbind()})),this}}]),e}();t.exports=c},{"./IndexBuffer":49,"./VertexBuffer":57,"./VertexPackage":58}],52:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return e.has(t.name)?e.get(t.name).index:e.size}function o(e,t,r){y.parseDeclarations([t,r],["uniform","attribute"]).forEach(function(t){if("attribute"===t.qualifier){var r=i(e.attributes,t);e.attributes.set(t.name,{type:t.type,index:r})}else{var n=t.type+(t.count>1?"[]":"");e.uniforms.set(t.name,{type:t.type,func:m[n]})}})}function a(e,t){var r=t-(e=e.toString()).length;e+=":";for(var n=0;n<r;n++)e+=" ";return e}function u(e,t,r){var n=e.createShader(e[r]);if(e.shaderSource(n,t),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS)){var i=t.split("\n"),o=i.length.toString().length+1,u=i.map(function(e,t){return a(t+1,o)+" "+e}).join("\n"),f=e.getShaderInfoLog(n);throw"An error occurred compiling the shader:\n\n"+f.slice(0,f.length-1)+"\n"+u}return n}function f(e){var t=e.gl;e.attributes.forEach(function(r,n){t.bindAttribLocation(e.program,r.index,n)})}function s(e){var t=e.gl,r=e.uniforms;r.forEach(function(n,i){var o=t.getUniformLocation(e.program,i);null===o?r.delete(i):n.location=o})}function c(e){return function(t){T.load({url:e,responseType:"text",success:function(e){t(null,e)},error:function(e){t(e,null)}})}}function l(e){return function(t){t(null,e)}}function h(e){return function(t){var r=[];e=e||[],(e=Array.isArray(e)?e:[e]).forEach(function(e){y.isGLSL(e)?r.push(l(e)):r.push(c(e))}),E(r,t)}}function d(e,t){var r=e.gl,n=_(t.define)+(t.common||""),i=t.vert.join(""),a=t.frag.join(""),c=u(r,n+i,"VERTEX_SHADER"),l=u(r,n+a,"FRAGMENT_SHADER");if(o(e,i,a),e.program=r.createProgram(),r.attachShader(e.program,c),r.attachShader(e.program,l),f(e),r.linkProgram(e.program),!r.getProgramParameter(e.program,r.LINK_STATUS))throw"An error occured linking the shader:\n"+r.getProgramInfoLog(e.program);s(e)}var p=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),E=e("async/parallel"),v=e("./WebGLContext"),y=e("./ShaderParser"),T=e("../util/XHRLoader"),m={bool:"uniform1i","bool[]":"uniform1iv",float:"uniform1f","float[]":"uniform1fv",int:"uniform1i","int[]":"uniform1iv",uint:"uniform1i","uint[]":"uniform1iv",vec2:"uniform2fv","vec2[]":"uniform2fv",ivec2:"uniform2iv","ivec2[]":"uniform2iv",vec3:"uniform3fv","vec3[]":"uniform3fv",ivec3:"uniform3iv","ivec3[]":"uniform3iv",vec4:"uniform4fv","vec4[]":"uniform4fv",ivec4:"uniform4iv","ivec4[]":"uniform4iv",mat2:"uniformMatrix2fv","mat2[]":"uniformMatrix2fv",mat3:"uniformMatrix3fv","mat3[]":"uniformMatrix3fv",mat4:"uniformMatrix4fv","mat4[]":"uniformMatrix4fv",sampler2D:"uniform1i",samplerCube:"uniform1i"},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[];return Object.keys(e).forEach(function(r){t.push("#define "+r+" "+e[r])}),t.join("\n")},b=function(){function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(n(this,e),!r.vert)throw"Vertex shader argument `vert` has not been provided";if(!r.frag)throw"Fragment shader argument `frag` has not been provided";this.program=0,this.gl=v.get(),this.version=r.version||"1.00",this.attributes=new Map,this.uniforms=new Map,r.attributes&&r.attributes.forEach(function(e,r){t.attributes.set(e,{index:r})}),E({common:h(r.common),vert:h(r.vert),frag:h(r.frag)},function(e,n){e?i&&setTimeout(function(){i(e,null)}):(n.define=r.define,d(t,n),i&&setTimeout(function(){i(null,t)}))})}return p(e,[{key:"use",value:function(){return this.gl.useProgram(this.program),this}},{key:"setUniform",value:function(e,t){var r=this.uniforms.get(e);if(!r)throw"No uniform found under name `"+e+"`";if(void 0===t||null===t)throw"Value passed for uniform `"+e+"` is undefined or null";return"mat2"===r.type||"mat3"===r.type||"mat4"===r.type?this.gl[r.func](r.location,!1,t):this.gl[r.func](r.location,t),this}},{key:"setUniforms",value:function(e){var t=this;return Object.keys(e).forEach(function(r){t.setUniform(r,e[r])}),this}}]),e}();t.exports=b},{"../util/XHRLoader":64,"./ShaderParser":53,"./WebGLContext":60,"async/parallel":16}],53:[function(e,t,r){"use strict";function n(e){return e.replace(h,"")}function i(e){return e.replace(y,"").replace(T,"")}function o(e){return e.replace(d," ").replace(p," ").replace(E,"$2$4$6")}function a(e,t,r){var n=r.match(v);return{qualifier:e,type:t,name:n[1],count:void 0===n[2]?1:parseInt(n[2],10)}}function u(e){var t=e.split(",").map(function(e){return e.trim()}),r=t.shift().split(" "),n=r.shift(),i=r.shift();return r.concat(t).map(function(e){return a(n,i,e)})}function f(e,t){var r=e.split(";"),n=t.join("|"),i=new RegExp("\\b("+n+")\\b.*"),o=[];return r.forEach(function(e){var t=e.match(i);t&&(o=o.concat(u(t[0])))}),o}function s(e){var t={};return e.filter(function(e){return!t[e.name]&&(t[e.name]=!0,!0)})}function c(e){return l.preprocess(e)}var l=e("./ShaderPreprocessor"),h=/(\/\*([\s\S]*?)\*\/)|(\/\/(.*)$)/gm,d=/(\r\n|\n|\r)/gm,p=/\s{2,}/g,E=/(\s*)(\[)(\s*)(\d+)(\s*)(\])(\s*)/g,v=/([a-zA-Z_][a-zA-Z0-9_]*)(?:\[(\d+)\])?/,y=/\bprecision\s+\w+\s+\w+;/g,T=/\b(highp|mediump|lowp)\s+/g,m=/void\s+main\s*\(\s*(void)*\s*\)\s*/im;t.exports={parseDeclarations:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(0===e.length||0===t.length)return[];e=Array.isArray(e)?e:[e],t=Array.isArray(t)?t:[t];var r=[];return e.forEach(function(e){e=o(e=i(e=c(e=n(e)))),r=r.concat(f(e,t))}),s(r)},isGLSL:function(e){return m.test(e)}}},{"./ShaderPreprocessor":54}],54:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o="__DEFINED__",a=/#define\b/i,u=/#undef\b/i,f=/#if\b/i,s=/#ifdef\b/i,c=/#ifndef\b/i,l=/#else\b/i,h=/#elif\b/i,d=/#endif\b/i,p=/#define\s+(\w+)(\s(\w*)?)?/i,E=/#undef\s+(\w+)/i,v=/#if\s+\(?\s*(!?\s*\w+)\s*(==|!=|>=|<=|<|>)?\s*(\w*)\s*\)?/i,y=/#ifdef\s+(\w+)/i,T=/#ifndef\s+(\w+)/i,m=/#elif\s+\(?\s*(!?\s*\w+)\s*(==|!=|>=|<=|<|>)?\s*(\w*)\s*\)?/i,_=/#([\W\w\s\d])(?:.*\\r?\n)*.*$/gm,b=function(e,t,r){if(void 0===t)return"!"===e[0]?!("true"===e||e>=1):"true"===e||e>=1;switch(t){case"==":return e===r;case"!=":return e!==r;case">":return e>r;case">=":return e>=r;case"<":return e<r;case"<=":return e<=r}throw"Unrecognized logical operator `"+t+"`"},g=function(){function e(t,r){n(this,e),this.type=t,this.conditional=r.trim(),this.body=[],this.children=[]}return i(e,[{key:"eval",value:function(){var e=void 0;switch(this.type){case"if":return e=v.exec(this.conditional),b(e[1],e[2],e[3]);case"ifdef":return(e=y.exec(this.conditional))[1]===o;case"ifndef":return(e=T.exec(this.conditional))[1]!==o;case"elif":return e=m.exec(this.conditional),b(e[1],e[2],e[3])}throw"Unrecognized conditional type `"+this.type+"`"}}]),e}(),w=function(){function e(t,r,i){n(this,e),this.if=new g(t,r),this.elif=[],this.else=null,this.parent=null,this.current=this.if,this.startLine=i,this.endLine=null}return i(e,[{key:"addElse",value:function(e){this.current=new g("else",e),this.else=this.current}},{key:"addElif",value:function(e){this.current=new g("elif",e),this.elif.push(this.current)}},{key:"addBody",value:function(e,t){this.current.body.push({string:e.trim(),line:t})}},{key:"nest",value:function(e){e.parent=this,this.current.children.push(e)}},{key:"extract",value:function(){var e=[];if(this.if.eval())return e=e.concat(this.if.body),this.if.children.forEach(function(t){e=e.concat(t.extract())}),e;for(var t=0;t<this.elif.length;t++){var r=this.elif[t];if(r.eval()){e=e.concat(r.body);for(var n=0;n<r.children.length;n++){var i=r.children[n];e=e.concat(i.extract())}return e}}return this.else?(e=e.concat(this.else.body),this.else.children.forEach(function(t){e=e.concat(t.extract())}),e):[]}},{key:"eval",value:function(){return this.extract().sort(function(e,t){return e.line-t.line}).map(function(e){return e.string}).join("\n")}}]),e}(),A=function(e){var t=[],r=null;if(e.forEach(function(e,n){if(e.match(f)){var i=new w("if",e,n);r?r.nest(i):t.push(i),r=i}else if(e.match(s)){var o=new w("ifdef",e,n);r?r.nest(o):t.push(o),r=o}else if(e.match(c)){var a=new w("ifndef",e,n);r?r.nest(a):t.push(a),r=a}else if(e.match(h)){if(!r)throw"Invalid preprocessor syntax, unexpected `#elif`";r.addElif(e)}else if(e.match(l)){if(!r)throw"Invalid preprocessor syntax, unexpected `#else`";r.addElse(e)}else if(e.match(d)){if(!r)throw"Invalid preprocessor syntax, unexpected `#endif`";r.endLine=n,r=r.parent}else r&&r.addBody(e,n)}),r)throw"Invalid preprocessor syntax, missing expected `#endif`";return t},x=function(e){var t=new Map,r=[];return e.forEach(function(e){if(e.match(a)){var n=p.exec(e);t.set(n[1],n[2]||o)}else if(e.match(u)){var i=E.exec(e);t.delete(i[1])}else if(e.match(s)){var f=y.exec(e);t.has(f[1])&&(e=e.replace(f[1],o)),r.push(e)}else if(e.match(c)){var l=T.exec(e);t.has(l[1])&&(e=e.replace(l[1],o)),r.push(e)}else t.forEach(function(t,r){e=e.replace(r,t)}),r.push(e)}),r};t.exports={preprocess:function(e){var t=e.split("\n");t=x(t);for(var r=A(t),n=r.length-1;n>=0;n--){var i=r[n],o=i.eval();o.length>0?t.splice(i.startLine,i.endLine-i.startLine+1,o):t.splice(i.startLine,i.endLine-i.startLine+1)}return t.join("\n").replace(_,"")}}},{}],55:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=e("./WebGLContext"),a=e("../util/Util"),u={NEAREST:!0,LINEAR:!0},f={NEAREST:!0,LINEAR:!0,NEAREST_MIPMAP_NEAREST:!0,LINEAR_MIPMAP_NEAREST:!0,NEAREST_MIPMAP_LINEAR:!0,LINEAR_MIPMAP_LINEAR:!0},s={NEAREST:!0,LINEAR:!0},c={NEAREST_MIPMAP_NEAREST:!0,LINEAR_MIPMAP_NEAREST:!0,NEAREST_MIPMAP_LINEAR:!0,LINEAR_MIPMAP_LINEAR:!0},l={REPEAT:!0,MIRRORED_REPEAT:!0,CLAMP_TO_EDGE:!0},h={DEPTH_COMPONENT:!0,DEPTH_STENCIL:!0},d="UNSIGNED_BYTE",p="RGBA",E="REPEAT",v="LINEAR",y=!0,T=!0,m=!0,_=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(n(this,e),t.wrapS=t.wrapS||t.wrap,t.wrapT=t.wrapT||t.wrap,t.minFilter=t.minFilter||t.filter,t.magFilter=t.magFilter||t.filter,this.gl=o.get(),this.texture=null,this.wrapS=t.wrapS||E,this.wrapT=t.wrapT||E,this.minFilter=t.minFilter||v,this.magFilter=t.magFilter||v,this.mipMap=void 0!==t.mipMap?t.mipMap:T,this.invertY=void 0!==t.invertY?t.invertY:m,this.premultiplyAlpha=void 0!==t.premultiplyAlpha?t.premultiplyAlpha:y,this.format=t.format||p,h[this.format]&&!o.checkExtension("WEBGL_depth_texture"))throw"Cannot create Texture2D of format `"+this.format+"` as `WEBGL_depth_texture` extension is unsupported";if(this.type=t.type||d,"FLOAT"===this.type&&!o.checkExtension("OES_texture_float"))throw"Cannot create Texture2D of type `FLOAT` as `OES_texture_float` extension is unsupported";if("string"!=typeof t.src){if(!a.isCanvasType(t.src)){if("number"!=typeof t.width||t.width<=0)throw"`width` argument is missing or invalid";if("number"!=typeof t.height||t.height<=0)throw"`height` argument is missing or invalid";if(a.mustBePowerOfTwo(this)){if(!a.isPowerOfTwo(t.width))throw"Parameters require a power-of-two texture, yet provided width of `"+t.width+"` is not a power of two";if(!a.isPowerOfTwo(t.height))throw"Parameters require a power-of-two texture, yet provided height of `"+t.height+"` is not a power of two"}}this.bufferData(t.src||null,t.width,t.height),this.setParameters(this)}}return i(e,[{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!Number.isInteger(e)||e<0)throw"Texture unit location is invalid";var t=this.gl;return t.activeTexture(t["TEXTURE"+e]),t.bindTexture(t.TEXTURE_2D,this.texture),this}},{key:"unbind",value:function(){var e=this.gl;return e.bindTexture(e.TEXTURE_2D,null),this}},{key:"bufferData",value:function(e,t,r){var n=this.gl;if(this.texture||(this.texture=n.createTexture()),n.bindTexture(n.TEXTURE_2D,this.texture),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,this.invertY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),Array.isArray(e)&&(e="UNSIGNED_SHORT"===this.type?new Uint16Array(e):"UNSIGNED_INT"===this.type?new Uint32Array(e):"FLOAT"===this.type?new Float32Array(e):new Uint8Array(e)),e instanceof Uint8Array)this.type="UNSIGNED_BYTE";else if(e instanceof Uint16Array)this.type="UNSIGNED_SHORT";else if(e instanceof Uint32Array)this.type="UNSIGNED_INT";else if(e instanceof Float32Array)this.type="FLOAT";else if(e&&!(e instanceof ArrayBuffer)&&!a.isCanvasType(e))throw"Argument must be of type `Array`, `ArrayBuffer`, `ArrayBufferView`, `ImageData`, `HTMLImageElement`, `HTMLCanvasElement`, `HTMLVideoElement`, or null";return a.isCanvasType(e)?(this.width=e.width,this.height=e.height,n.texImage2D(n.TEXTURE_2D,0,n[this.format],n[this.format],n[this.type],e)):(this.width=t||this.width,this.height=r||this.height,n.texImage2D(n.TEXTURE_2D,0,n[this.format],this.width,this.height,0,n[this.format],n[this.type],e)),this.mipMap&&n.generateMipmap(n.TEXTURE_2D),n.bindTexture(n.TEXTURE_2D,null),this}},{key:"bufferSubData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,o=this.gl;if(o.bindTexture(o.TEXTURE_2D,this.texture),Array.isArray(e)&&(e="UNSIGNED_SHORT"===this.type?new Uint16Array(e):"UNSIGNED_INT"===this.type?new Uint32Array(e):"FLOAT"===this.type?new Float32Array(e):new Uint8Array(e)),e instanceof Uint8Array){if("UNSIGNED_BYTE"!==this.type)throw"Provided argument of type `Uint8Array` does not match type of `UNSIGNED_BYTE`"}else if(e instanceof Uint16Array){if("UNSIGNED_SHORT"!==this.type)throw"Provided argument of type `Uint16Array` does not match type of `UNSIGNED_SHORT`"}else if(e instanceof Uint32Array){if("UNSIGNED_INT"!==this.type)throw"Provided argument of type `Uint32Array` does not match type of `UNSIGNED_INT`"}else if(e instanceof Float32Array){if("FLOAT"!==this.type)throw"Provided argument of type `Float32Array` does not match type of `FLOAT`"}else if(!(e instanceof ArrayBuffer||a.isCanvasType(e)))throw"Argument must be of type `Array`, `ArrayBuffer`, `ArrayBufferView`, `ImageData`, `HTMLImageElement`, `HTMLCanvasElement`, or `HTMLVideoElement`";if(a.isCanvasType(e))o.texSubImage2D(o.TEXTURE_2D,0,t,r,o[this.format],o[this.type],e);else{if(!Number.isInteger(n))throw"Provided width of `"+n+"` is invalid";if(!Number.isInteger(i))throw"Provided height of `"+i+"` is invalid";if(n+t>this.width)throw"Provided width of `"+n+"` and xOffset of  `"+t+"` overflows the texture width of `"+this.width+"`";if(i+r>this.height)throw"Provided width of `"+i+"` and xOffset of  `"+r+"` overflows the texture width of `"+this.height+"`";o.texSubImage2D(o.TEXTURE_2D,0,t,r,n,i,o[this.format],o[this.type],e)}return this.mipMap&&o.generateMipmap(o.TEXTURE_2D),o.bindTexture(o.TEXTURE_2D,null),this}},{key:"setParameters",value:function(e){var t=this.gl;t.bindTexture(t.TEXTURE_2D,this.texture);var r=e.wrapS||e.wrap;if(r){if(!l[r])throw"Texture parameter `"+r+"` is not a valid value for `TEXTURE_WRAP_S`";this.wrapS=r,t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t[this.wrapS])}if(r=e.wrapT||e.wrap){if(!l[r])throw"Texture parameter `"+r+"` is not a valid value for `TEXTURE_WRAP_T`";this.wrapT=r,t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t[this.wrapT])}if(r=e.magFilter||e.filter){if(!u[r])throw"Texture parameter `"+r+"` is not a valid value for 'TEXTURE_MAG_FILTER`";this.magFilter=r,t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t[this.magFilter])}if(r=e.minFilter||e.filter)if(this.mipMap){if(s[r]&&(r+="_MIPMAP_LINEAR"),!c[r])throw"Texture parameter `"+r+"` is not a valid value for `TEXTURE_MIN_FILTER`";this.minFilter=r,t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t[this.minFilter])}else{if(!f[r])throw"Texture parameter `"+r+"` is not a valid value for `TEXTURE_MIN_FILTER`";this.minFilter=r,t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t[this.minFilter])}return t.bindTexture(t.TEXTURE_2D,this.texture),this}},{key:"resize",value:function(e,t){if("number"!=typeof e||e<=0)throw"Provided width of `"+e+"` is invalid";if("number"!=typeof t||t<=0)throw"Provided height of `"+t+"` is invalid";return this.bufferData(null,e,t),this}}]),e}();t.exports=_},{"../util/Util":63,"./WebGLContext":60}],56:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){if("number"!=typeof e.width||e.width<=0)throw"`width` argument is missing or invalid";if("number"!=typeof e.height||e.height<=0)throw"`height` argument is missing or invalid";if(e.width!==e.height)throw"Provided `width` must be equal to `height`";if(h.mustBePowerOfTwo(e)&&!h.isPowerOfTwo(e.width))throw"Parameters require a power-of-two texture, yet provided size of "+e.width+" is not a power of two"}function o(e,t,r){return function(n){l.load({url:r,success:function(r){r=h.resizeCanvas(e,r),e.bufferData(t,r),n(null)},error:function(e){n(e,null)}})}}function a(e,t,r){return function(n){r=h.resizeCanvas(e,r),e.bufferData(t,r),n(null)}}function u(e,t,r){return i(e),function(n){e.bufferData(t,r),n(null)}}var f=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=e("async/parallel"),c=e("./WebGLContext"),l=e("../util/ImageLoader"),h=e("../util/Util"),d=["-x","+x","-y","+y","-z","+z"],p={"+z":"TEXTURE_CUBE_MAP_POSITIVE_Z","-z":"TEXTURE_CUBE_MAP_NEGATIVE_Z","+x":"TEXTURE_CUBE_MAP_POSITIVE_X","-x":"TEXTURE_CUBE_MAP_NEGATIVE_X","+y":"TEXTURE_CUBE_MAP_POSITIVE_Y","-y":"TEXTURE_CUBE_MAP_NEGATIVE_Y"},E={TEXTURE_CUBE_MAP_POSITIVE_Z:!0,TEXTURE_CUBE_MAP_NEGATIVE_Z:!0,TEXTURE_CUBE_MAP_POSITIVE_X:!0,TEXTURE_CUBE_MAP_NEGATIVE_X:!0,TEXTURE_CUBE_MAP_POSITIVE_Y:!0,TEXTURE_CUBE_MAP_NEGATIVE_Y:!0},v={NEAREST:!0,LINEAR:!0},y={NEAREST:!0,LINEAR:!0,NEAREST_MIPMAP_NEAREST:!0,LINEAR_MIPMAP_NEAREST:!0,NEAREST_MIPMAP_LINEAR:!0,LINEAR_MIPMAP_LINEAR:!0},T={NEAREST:!0,LINEAR:!0},m={NEAREST_MIPMAP_NEAREST:!0,LINEAR_MIPMAP_NEAREST:!0,NEAREST_MIPMAP_LINEAR:!0,LINEAR_MIPMAP_LINEAR:!0},_={REPEAT:!0,MIRRORED_REPEAT:!0,CLAMP_TO_EDGE:!0},b={RGB:!0,RGBA:!0},g="UNSIGNED_BYTE",w="RGBA",A="CLAMP_TO_EDGE",x="LINEAR",R=!0,N=!0,I=!0,P=function(){function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(n(this,e),this.gl=c.get(),this.texture=null,r.wrapS=r.wrapS||r.wrap,r.wrapT=r.wrapT||r.wrap,r.minFilter=r.minFilter||r.filter,r.magFilter=r.magFilter||r.filter,this.wrapS=_[r.wrapS]?r.wrapS:A,this.wrapT=_[r.wrapT]?r.wrapT:A,this.minFilter=y[r.minFilter]?r.minFilter:x,this.magFilter=v[r.magFilter]?r.magFilter:x,this.mipMap=void 0!==r.mipMap?r.mipMap:N,this.invertY=void 0!==r.invertY?r.invertY:I,this.premultiplyAlpha=void 0!==r.premultiplyAlpha?r.premultiplyAlpha:R,this.format=b[r.format]?r.format:w,this.type=r.type||g,"FLOAT"===this.type&&!c.checkExtension("OES_texture_float"))throw"Cannot create Texture2D of type `FLOAT` as `OES_texture_float` extension is unsupported";if(this.width=r.width,this.height=r.height,this.bufferedFaces=[],r.faces){var l=[];d.forEach(function(e){var n=r.faces[e],i=p[e];"string"==typeof n?l.push(o(t,i,n)):h.isCanvasType(n)?l.push(a(t,i,n)):l.push(u(t,i,n))}),s(l,function(e){e?f&&setTimeout(function(){f(e,null)}):(t.setParameters(t),f&&setTimeout(function(){f(null,t)}))})}else i(this),d.forEach(function(e){t.bufferData(p[e],null)}),this.setParameters(this)}return f(e,[{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!Number.isInteger(e)||e<0)throw"Texture unit location is invalid";var t=this.gl;return t.activeTexture(t["TEXTURE"+e]),t.bindTexture(t.TEXTURE_CUBE_MAP,this.texture),this}},{key:"unbind",value:function(){var e=this.gl;return e.bindTexture(e.TEXTURE_CUBE_MAP,null),this}},{key:"bufferData",value:function(e,t){if(!E[e])throw"Provided `target` of "+e+"  is invalid";var r=this.gl;if(this.texture||(this.texture=r.createTexture()),r.bindTexture(r.TEXTURE_CUBE_MAP,this.texture),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,this.invertY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),Array.isArray(t)&&(t="UNSIGNED_SHORT"===this.type?new Uint16Array(t):"UNSIGNED_INT"===this.type?new Uint32Array(t):"FLOAT"===this.type?new Float32Array(t):new Uint8Array(t)),t instanceof Uint8Array)this.type="UNSIGNED_BYTE";else if(t instanceof Uint16Array)this.type="UNSIGNED_SHORT";else if(t instanceof Uint32Array)this.type="UNSIGNED_INT";else if(t instanceof Float32Array)this.type="FLOAT";else if(t&&!(t instanceof ArrayBuffer)&&!h.isCanvasType(t))throw"Argument must be of type `Array`, `ArrayBuffer`, `ArrayBufferView`, `ImageData`, `HTMLImageElement`, `HTMLCanvasElement`, `HTMLVideoElement`, or null";return h.isCanvasType(t)?(this.width=t.width,this.height=t.height,r.texImage2D(r[e],0,r[this.format],r[this.format],r[this.type],t)):r.texImage2D(r[e],0,r[this.format],this.width,this.height,0,r[this.format],r[this.type],t),this.bufferedFaces.indexOf(e)<0&&this.bufferedFaces.push(e),this.mipMap&&6===this.bufferedFaces.length&&r.generateMipmap(r.TEXTURE_CUBE_MAP),r.bindTexture(r.TEXTURE_CUBE_MAP,null),this}},{key:"setParameters",value:function(e){var t=this.gl;t.bindTexture(t.TEXTURE_CUBE_MAP,this.texture);var r=e.wrapS||e.wrap;if(r){if(!_[r])throw"Texture parameter `"+r+"` is not a valid value for `TEXTURE_WRAP_S`";this.wrapS=r,t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_WRAP_S,t[this.wrapS])}if(r=e.wrapT||e.wrap){if(!_[r])throw"Texture parameter `"+r+"` is not a valid value for `TEXTURE_WRAP_T`";this.wrapT=r,t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_WRAP_T,t[this.wrapT])}if(r=e.magFilter||e.filter){if(!v[r])throw"Texture parameter `"+r+"` is not a valid value for 'TEXTURE_MAG_FILTER`";this.magFilter=r,t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t[this.magFilter])}if(r=e.minFilter||e.filter)if(this.mipMap){if(T[r]&&(r+="_MIPMAP_LINEAR"),!m[r])throw"Texture parameter `"+r+"` is not a valid value for `TEXTURE_MIN_FILTER`";this.minFilter=r,t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t[this.minFilter])}else{if(!y[r])throw"Texture parameter `"+r+"` is not a valid value for `TEXTURE_MIN_FILTER`";this.minFilter=r,t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t[this.minFilter])}return t.bindTexture(t.TEXTURE_CUBE_MAP,null),this}}]),e}();t.exports=P},{"../util/ImageLoader":62,"../util/Util":63,"./WebGLContext":60,"async/parallel":16}],57:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){if(1===e.size)return 0;var t=0,r=0,n=0;return e.forEach(function(e){var i=e.byteOffset,o=e.size,a=e.type;r+=o*c[a],i>t&&(t=i,n=i+o*c[a])}),t>=r?0:n}function o(e){var t=new Map;return Object.keys(e).forEach(function(r){var n=parseInt(r,10);if(isNaN(n))throw"Attribute index `"+r+"` does not represent an integer";var i=e[r],o=i.size,a=i.type,u=i.byteOffset;if(!l[o])throw"Attribute pointer `size` parameter is invalid, must be one of "+JSON.stringify(Object.keys(l));if(!s[a])throw"Attribute pointer `type` parameter is invalid, must be one of "+JSON.stringify(Object.keys(s));t.set(n,{size:o,type:a,byteOffset:void 0!==u?u:h})}),t}var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("./WebGLContext"),f={POINTS:!0,LINES:!0,LINE_STRIP:!0,LINE_LOOP:!0,TRIANGLES:!0,TRIANGLE_STRIP:!0,TRIANGLE_FAN:!0},s={BYTE:!0,UNSIGNED_BYTE:!0,SHORT:!0,UNSIGNED_SHORT:!0,FIXED:!0,FLOAT:!0},c={BYTE:1,UNSIGNED_BYTE:1,SHORT:2,UNSIGNED_SHORT:2,FIXED:4,FLOAT:4},l={1:!0,2:!0,3:!0,4:!0},h=0,d="TRIANGLES",p=0,E=0,v=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n(this,e),this.gl=u.get(),this.buffer=null,this.mode=f[a.mode]?a.mode:d,this.count=void 0!==a.count?a.count:E,this.indexOffset=void 0!==a.indexOffset?a.indexOffset:p,this.pointers=o(r),this.byteStride=i(this.pointers),t&&(t instanceof WebGLBuffer?this.buffer=t:this.bufferData(t))}return a(e,[{key:"bufferData",value:function(e){var t=this.gl;if(Array.isArray(e))e=new Float32Array(e);else if(!(e instanceof ArrayBuffer||ArrayBuffer.isView(e)||Number.isInteger(e)))throw"Argument must be of type `Array`, `ArrayBuffer`, `ArrayBufferView`, or `Number`";this.buffer||(this.buffer=t.createBuffer()),t.bindBuffer(t.ARRAY_BUFFER,this.buffer),t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)}},{key:"bufferSubData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h,r=this.gl;if(!this.buffer)throw"Buffer has not yet been allocated, allocate with `bufferData`";if(Array.isArray(e))e=new Float32Array(e);else if(!(e instanceof ArrayBuffer||ArrayBuffer.isView(e)))throw"Argument must be of type `Array`, `ArrayBuffer`, or `ArrayBufferView`";return r.bindBuffer(r.ARRAY_BUFFER,this.buffer),r.bufferSubData(r.ARRAY_BUFFER,t,e),this}},{key:"bind",value:function(){var e=this,t=this.gl;return t.bindBuffer(t.ARRAY_BUFFER,this.buffer),this.pointers.forEach(function(r,n){t.vertexAttribPointer(n,r.size,t[r.type],!1,e.byteStride,r.byteOffset),t.enableVertexAttribArray(n)}),this}},{key:"unbind",value:function(){var e=this.gl;return e.bindBuffer(e.ARRAY_BUFFER,this.buffer),this.pointers.forEach(function(t,r){e.disableVertexAttribArray(r)}),this}},{key:"draw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.gl,r=t[e.mode||this.mode],n=void 0!==e.indexOffset?e.indexOffset:this.indexOffset,i=void 0!==e.count?e.count:this.count;if(0===i)throw"Attempting to draw with a count of 0";return t.drawArrays(r,n,i),this}}]),e}();t.exports=v},{"./WebGLContext":60}],58:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){var t=[];return Object.keys(e).forEach(function(r){var n=parseFloat(r);if(!Number.isInteger(n)||n<0)throw"Attribute index `"+r+"` does not represent a valid integer";var i=e[r];if(!(Array.isArray(i)&&i.length>0))throw"Error parsing attribute of index `"+n+"`";t.push({index:n,data:i})}),t.sort(function(e,t){return e.index-t.index}),t}function o(e){return Array.isArray(e)?e.length:void 0!==e.x&&void 0!==e.y?void 0!==e.z?void 0!==e.w?4:3:2:1}function a(e,t){var r=Number.MAX_VALUE,n=0;t.forEach(function(t){var i=o(t.data[0]);r=Math.min(r,t.data.length),e.pointers[t.index]={type:h,size:i,byteOffset:n*d},n+=i}),e.stride=n,e.length=r}function u(e,t,r,n,i){for(var o=0;o<r;o++){var a=t[o],u=n+i*o;void 0!==a.x?e[u]=a.x:void 0!==a[0]?e[u]=a[0]:e[u]=a}}function f(e,t,r,n,i){for(var o=0;o<r;o++){var a=t[o],u=n+i*o;e[u]=void 0!==a.x?a.x:a[0],e[u+1]=void 0!==a.y?a.y:a[1]}}function s(e,t,r,n,i){for(var o=0;o<r;o++){var a=t[o],u=n+i*o;e[u]=void 0!==a.x?a.x:a[0],e[u+1]=void 0!==a.y?a.y:a[1],e[u+2]=void 0!==a.z?a.z:a[2]}}function c(e,t,r,n,i){for(var o=0;o<r;o++){var a=t[o],u=n+i*o;e[u]=void 0!==a.x?a.x:a[0],e[u+1]=void 0!==a.y?a.y:a[1],e[u+2]=void 0!==a.z?a.z:a[2],e[u+3]=void 0!==a.w?a.w:a[3]}}var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),h="FLOAT",d=4,p=function(){function e(t){n(this,e),this.stride=0,this.length=0,this.buffer=null,this.pointers={},t&&this.set(t)}return l(e,[{key:"set",value:function(e){a(this,e=i(e));var t=this.length,r=this.stride,n=this.pointers,o=this.buffer=new Float32Array(t*r);return e.forEach(function(e){var i=n[e.index],a=i.byteOffset/d;switch(i.size){case 2:f(o,e.data,t,a,r);break;case 3:s(o,e.data,t,a,r);break;case 4:c(o,e.data,t,a,r);break;default:u(o,e.data,t,a,r)}}),this}}]),e}();t.exports=p},{}],59:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,r,n,i){var o=e.gl;t=void 0!==t?t:e.x,r=void 0!==r?r:e.y,n=void 0!==n?n:e.width,i=void 0!==i?i:e.height,o.viewport(t,r,n,i)}var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("./WebGLContext"),u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,e),this.gl=a.get(),this.stack=[],this.resize(t.width||this.gl.canvas.width,t.height||this.gl.canvas.height)}return o(e,[{key:"resize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if("number"!=typeof e||e<=0)throw"Provided `width` of `"+e+"` is invalid";if("number"!=typeof t||t<=0)throw"Provided `height` of `"+t+"` is invalid";return this.width=e,this.height=t,this.gl.canvas.width=e,this.gl.canvas.height=t,this}},{key:"push",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.width,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.height;if("number"!=typeof e)throw"Provided `x` of `"+e+"` is invalid";if("number"!=typeof t)throw"Provided `y` of `"+t+"` is invalid";if("number"!=typeof r||r<=0)throw"Provided `width` of `"+r+"` is invalid";if("number"!=typeof n||n<=0)throw"Provided `height` of `"+n+"` is invalid";return this.stack.push({x:e,y:t,width:r,height:n}),i(this,e,t,r,n),this}},{key:"pop",value:function(){if(0===this.stack.length)throw"Viewport stack is empty";if(this.stack.pop(),this.stack.length>0){var e=this.stack[this.stack.length-1];i(this,e.x,e.y,e.width,e.height)}else i(this);return this}}]),e}();t.exports=u},{"./WebGLContext":60}],60:[function(e,t,r){"use strict";function n(){var e=function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)};return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e)}function i(e){return e.id||(e.id=n()),e.id}function o(e){return e instanceof HTMLCanvasElement?e:"string"==typeof e?document.getElementById(e)||document.querySelector(e):null}function a(e){var t=null;return h.forEach(function(r){e===r.gl&&(t=r)}),t}function u(e){if(void 0===e){if(d)return d}else{if(e instanceof WebGLRenderingContext)return a(e);var t=o(e);if(t)return h.get(i(t))}return null}function f(e){var t=e.gl;l.forEach(function(r){e.extensions.set(r,t.getExtension(r))})}function s(e,t){var r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t);if(!r)throw"Unable to create a WebGLRenderingContext, please ensure your browser supports WebGL";var n={id:i(e),gl:r,extensions:new Map};return f(n),h.set(i(e),n),d=n,n}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=["OES_texture_float","OES_texture_half_float","WEBGL_lose_context","OES_standard_derivatives","OES_vertex_array_object","WEBGL_debug_renderer_info","WEBGL_debug_shaders","WEBGL_compressed_texture_s3tc","WEBGL_depth_texture","OES_element_index_uint","EXT_texture_filter_anisotropic","EXT_frag_depth","WEBGL_draw_buffers","ANGLE_instanced_arrays","OES_texture_float_linear","OES_texture_half_float_linear","EXT_blend_minmax","EXT_shader_texture_lod","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_pvrtc","EXT_color_buffer_half_float","WEBGL_color_buffer_float","EXT_sRGB","WEBGL_compressed_texture_etc1","EXT_disjoint_timer_query","EXT_color_buffer_float"],h=new Map,d=null;t.exports={bind:function(e){var t=u(e);if(t)return d=t,this;throw"No context exists for provided argument '"+e+"'"},get:function(e,t){var r=u(e);if(r)return r.gl;var n=o(e);if(!n)throw"No context is currently bound or could be associated with provided argument of type "+(void 0===e?"undefined":c(e));return s(n,t).gl},remove:function(e){var t=u(e);if(!t)throw"No context is currently bound or could be associated with provided argument of type "+(void 0===e?"undefined":c(e));h.delete(t.id),t===d&&(d=null)},supportedExtensions:function(e){var t=u(e);if(t){var r=[];return t.extensions.forEach(function(e,t){e&&r.push(t)}),r}throw"No context is currently bound or could be associated with provided argument of type "+(void 0===e?"undefined":c(e))},unsupportedExtensions:function(e){var t=u(e);if(t){var r=[];return t.extensions.forEach(function(e,t){e||r.push(t)}),r}throw"No context is currently bound or could be associated with provided argument of type "+(void 0===e?"undefined":c(e))},checkExtension:function(e,t){t||(t=e,e=void 0);var r=u(e);if(r)return!!r.extensions.get(t);throw"No context is currently bound or could be associated with provided argument of type "+(void 0===e?"undefined":c(e))},getExtension:function(e,t){t||(t=e,e=void 0);var r=u(e);if(r)return r.extensions.get(t)||null;throw"No context is currently bound or could be associated with provided argument of type "+(void 0===e?"undefined":c(e))}}},{}],61:[function(e,t,r){"use strict";t.exports={ColorTexture2D:e("./core/ColorTexture2D"),DepthTexture2D:e("./core/DepthTexture2D"),IndexBuffer:e("./core/IndexBuffer"),Renderable:e("./core/Renderable"),RenderTarget:e("./core/RenderTarget"),Shader:e("./core/Shader"),Texture2D:e("./core/Texture2D"),TextureCubeMap:e("./core/TextureCubeMap"),VertexBuffer:e("./core/VertexBuffer"),VertexPackage:e("./core/VertexPackage"),Viewport:e("./core/Viewport"),WebGLContext:e("./core/WebGLContext")}},{"./core/ColorTexture2D":47,"./core/DepthTexture2D":48,"./core/IndexBuffer":49,"./core/RenderTarget":50,"./core/Renderable":51,"./core/Shader":52,"./core/Texture2D":55,"./core/TextureCubeMap":56,"./core/VertexBuffer":57,"./core/VertexPackage":58,"./core/Viewport":59,"./core/WebGLContext":60}],62:[function(e,t,r){"use strict";t.exports={load:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new Image;t.onload=function(){e.success&&e.success(t)},t.onerror=function(t){if(e.error){var r="Unable to load image from URL: `"+t.path[0].currentSrc+"`";e.error(r)}},t.crossOrigin=e.crossOrigin?"anonymous":void 0,t.src=e.url}}},{}],63:[function(e,t,r){"use strict";function n(e){return e instanceof ImageData||e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement}function i(e){return e.mipMap||"REPEAT"===e.wrapS||"MIRRORED_REPEAT"===e.wrapS||"REPEAT"===e.wrapT||"MIRRORED_REPEAT"===e.wrapT}function o(e){return 0!==e&&0==(e&e-1)}function a(e){return 0!==e&&(e-=1),e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,(e|=e>>16)+1}function u(e,t){if(!i(e)||o(t.width)&&o(t.height))return t;var r=document.createElement("canvas");return r.width=a(t.width),r.height=a(t.height),r.getContext("2d").drawImage(t,0,0,t.width,t.height,0,0,r.width,r.height),r}t.exports={isCanvasType:n,mustBePowerOfTwo:i,isPowerOfTwo:o,nextHighestPowerOfTwo:a,resizeCanvas:u}},{}],64:[function(e,t,r){"use strict";t.exports={load:function(e){var t=new XMLHttpRequest;t.open("GET",e.url,!0),t.responseType=e.responseType,t.onreadystatechange=function(){4===t.readyState&&(200===t.status?e.success&&e.success(t.response):e.error&&e.error("GET "+t.responseURL+" "+t.status+" ("+t.statusText+")"))},t.withCredentials=!!e.crossOrigin,t.send()}}},{}]},{},[61])(61)});
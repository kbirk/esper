!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.esper=e()}}(function(){return function e(t,r,i){function n(a,u){if(!r[a]){if(!t[a]){var f="function"==typeof require&&require;if(!u&&f)return f(a,!0);if(o)return o(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var l=r[a]={exports:{}};t[a][0].call(l.exports,function(e){var r=t[a][1][e];return n(r?r:e)},l,l.exports,e,t,r,i)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)n(i[a]);return n}({1:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function n(e,t,r){function i(e,t){e?r(e):++o!==a&&t!==f.default||r(null)}r=(0,v.default)(r||p.default);var n=0,o=0,a=e.length;for(0===a&&r(null);n<a;n++)t(e[n],n,(0,T.default)(i))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t,r){var i=(0,a.default)(e)?n:_;i(e,t,r)};var o=e("lodash/isArrayLike"),a=i(o),u=e("./internal/breakLoop"),f=i(u),s=e("./eachOfLimit"),l=i(s),c=e("./internal/doLimit"),h=i(c),d=e("lodash/noop"),p=i(d),E=e("./internal/once"),v=i(E),y=e("./internal/onlyOnce"),T=i(y),_=(0,h.default)(l.default,1/0);t.exports=r.default},{"./eachOfLimit":2,"./internal/breakLoop":3,"./internal/doLimit":4,"./internal/once":8,"./internal/onlyOnce":9,"lodash/isArrayLike":35,"lodash/noop":43}],2:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function n(e,t,r,i){(0,a.default)(t)(e,r,i)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=e("./internal/eachOfLimit"),a=i(o);t.exports=r.default},{"./internal/eachOfLimit":5}],3:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={},t.exports=r.default},{}],4:[function(e,t,r){"use strict";function i(e,t){return function(r,i,n){return e(r,t,i,n)}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=i,t.exports=r.default},{}],5:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function n(e){return function(t,r,i){function n(e,t){if(c-=1,e)s=!0,i(e);else{if(t===p.default||s&&c<=0)return s=!0,i(null);o()}}function o(){for(;c<e&&!s;){var t=u();if(null===t)return s=!0,void(c<=0&&i(null));c+=1,r(t.value,t.key,(0,h.default)(n))}}if(i=(0,f.default)(i||a.default),e<=0||!t)return i(null);var u=(0,l.default)(t),s=!1,c=0;o()}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=e("lodash/noop"),a=i(o),u=e("./once"),f=i(u),s=e("./iterator"),l=i(s),c=e("./onlyOnce"),h=i(c),d=e("./breakLoop"),p=i(d);t.exports=r.default},{"./breakLoop":3,"./iterator":7,"./once":8,"./onlyOnce":9,"lodash/noop":43}],6:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return i&&e[i]&&e[i]()};var i="function"==typeof Symbol&&Symbol.iterator;t.exports=r.default},{}],7:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function n(e){var t=-1,r=e.length;return function(){return++t<r?{value:e[t],key:t}:null}}function o(e){var t=-1;return function(){var r=e.next();return r.done?null:(t++,{value:r.value,key:t})}}function a(e){var t=(0,d.default)(e),r=-1,i=t.length;return function(){var n=t[++r];return r<i?{value:e[n],key:n}:null}}function u(e){if((0,s.default)(e))return n(e);var t=(0,c.default)(e);return t?o(t):a(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=u;var f=e("lodash/isArrayLike"),s=i(f),l=e("./getIterator"),c=i(l),h=e("lodash/keys"),d=i(h);t.exports=r.default},{"./getIterator":6,"lodash/isArrayLike":35,"lodash/keys":42}],8:[function(e,t,r){"use strict";function i(e){return function(){if(null!==e){var t=e;e=null,t.apply(this,arguments)}}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=i,t.exports=r.default},{}],9:[function(e,t,r){"use strict";function i(e){return function(){if(null===e)throw new Error("Callback was already called.");var t=e;e=null,t.apply(this,arguments)}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=i,t.exports=r.default},{}],10:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function n(e,t,r){r=r||a.default;var i=(0,f.default)(t)?[]:{};e(t,function(e,t,r){e((0,l.default)(function(e,n){n.length<=1&&(n=n[0]),i[t]=n,r(e)}))},function(e){r(e,i)})}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=e("lodash/noop"),a=i(o),u=e("lodash/isArrayLike"),f=i(u),s=e("./rest"),l=i(s);t.exports=r.default},{"./rest":11,"lodash/isArrayLike":35,"lodash/noop":43}],11:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function n(e,t){return(0,a.default)(e,t,f.default)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=e("lodash/_overRest"),a=i(o),u=e("lodash/identity"),f=i(u);t.exports=r.default},{"lodash/_overRest":30,"lodash/identity":32}],12:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function n(e,t){(0,f.default)(a.default,e,t)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=e("./eachOf"),a=i(o),u=e("./internal/parallel"),f=i(u);t.exports=r.default},{"./eachOf":1,"./internal/parallel":10}],13:[function(e,t,r){var i=e("./_root"),n=i.Symbol;t.exports=n},{"./_root":31}],14:[function(e,t,r){function i(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}t.exports=i},{}],15:[function(e,t,r){function i(e,t){var r=a(e),i=!r&&o(e),l=!r&&!i&&u(e),h=!r&&!i&&!l&&s(e),d=r||i||l||h,p=d?n(e.length,String):[],E=p.length;for(var v in e)!t&&!c.call(e,v)||d&&("length"==v||l&&("offset"==v||"parent"==v)||h&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||f(v,E))||p.push(v);return p}var n=e("./_baseTimes"),o=e("./isArguments"),a=e("./isArray"),u=e("./isBuffer"),f=e("./_isIndex"),s=e("./isTypedArray"),l=Object.prototype,c=l.hasOwnProperty;t.exports=i},{"./_baseTimes":20,"./_isIndex":24,"./isArguments":33,"./isArray":34,"./isBuffer":36,"./isTypedArray":41}],16:[function(e,t,r){function i(e){return null==e?void 0===e?f:u:s&&s in Object(e)?o(e):a(e)}var n=e("./_Symbol"),o=e("./_getRawTag"),a=e("./_objectToString"),u="[object Null]",f="[object Undefined]",s=n?n.toStringTag:void 0;t.exports=i},{"./_Symbol":13,"./_getRawTag":23,"./_objectToString":28}],17:[function(e,t,r){function i(e){return o(e)&&n(e)==a}var n=e("./_baseGetTag"),o=e("./isObjectLike"),a="[object Arguments]";t.exports=i},{"./_baseGetTag":16,"./isObjectLike":40}],18:[function(e,t,r){function i(e){return a(e)&&o(e.length)&&!!U[n(e)]}var n=e("./_baseGetTag"),o=e("./isLength"),a=e("./isObjectLike"),u="[object Arguments]",f="[object Array]",s="[object Boolean]",l="[object Date]",c="[object Error]",h="[object Function]",d="[object Map]",p="[object Number]",E="[object Object]",v="[object RegExp]",y="[object Set]",T="[object String]",_="[object WeakMap]",m="[object ArrayBuffer]",b="[object DataView]",g="[object Float32Array]",A="[object Float64Array]",w="[object Int8Array]",x="[object Int16Array]",R="[object Int32Array]",N="[object Uint8Array]",I="[object Uint8ClampedArray]",P="[object Uint16Array]",S="[object Uint32Array]",U={};U[g]=U[A]=U[w]=U[x]=U[R]=U[N]=U[I]=U[P]=U[S]=!0,U[u]=U[f]=U[m]=U[s]=U[b]=U[l]=U[c]=U[h]=U[d]=U[p]=U[E]=U[v]=U[y]=U[T]=U[_]=!1,t.exports=i},{"./_baseGetTag":16,"./isLength":38,"./isObjectLike":40}],19:[function(e,t,r){function i(e){if(!n(e))return o(e);var t=[];for(var r in Object(e))u.call(e,r)&&"constructor"!=r&&t.push(r);return t}var n=e("./_isPrototype"),o=e("./_nativeKeys"),a=Object.prototype,u=a.hasOwnProperty;t.exports=i},{"./_isPrototype":25,"./_nativeKeys":26}],20:[function(e,t,r){function i(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}t.exports=i},{}],21:[function(e,t,r){function i(e){return function(t){return e(t)}}t.exports=i},{}],22:[function(e,t,r){(function(e){var r="object"==typeof e&&e&&e.Object===Object&&e;t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],23:[function(e,t,r){function i(e){var t=a.call(e,f),r=e[f];try{e[f]=void 0;var i=!0}catch(e){}var n=u.call(e);return i&&(t?e[f]=r:delete e[f]),n}var n=e("./_Symbol"),o=Object.prototype,a=o.hasOwnProperty,u=o.toString,f=n?n.toStringTag:void 0;t.exports=i},{"./_Symbol":13}],24:[function(e,t,r){function i(e,t){return t=null==t?n:t,!!t&&("number"==typeof e||o.test(e))&&e>-1&&e%1==0&&e<t}var n=9007199254740991,o=/^(?:0|[1-9]\d*)$/;t.exports=i},{}],25:[function(e,t,r){function i(e){var t=e&&e.constructor,r="function"==typeof t&&t.prototype||n;return e===r}var n=Object.prototype;t.exports=i},{}],26:[function(e,t,r){var i=e("./_overArg"),n=i(Object.keys,Object);t.exports=n},{"./_overArg":29}],27:[function(e,t,r){var i=e("./_freeGlobal"),n="object"==typeof r&&r&&!r.nodeType&&r,o=n&&"object"==typeof t&&t&&!t.nodeType&&t,a=o&&o.exports===n,u=a&&i.process,f=function(){try{return u&&u.binding&&u.binding("util")}catch(e){}}();t.exports=f},{"./_freeGlobal":22}],28:[function(e,t,r){function i(e){return o.call(e)}var n=Object.prototype,o=n.toString;t.exports=i},{}],29:[function(e,t,r){function i(e,t){return function(r){return e(t(r))}}t.exports=i},{}],30:[function(e,t,r){function i(e,t,r){return t=o(void 0===t?e.length-1:t,0),function(){for(var i=arguments,a=-1,u=o(i.length-t,0),f=Array(u);++a<u;)f[a]=i[t+a];a=-1;for(var s=Array(t+1);++a<t;)s[a]=i[a];return s[t]=r(f),n(e,this,s)}}var n=e("./_apply"),o=Math.max;t.exports=i},{"./_apply":14}],31:[function(e,t,r){var i=e("./_freeGlobal"),n="object"==typeof self&&self&&self.Object===Object&&self,o=i||n||Function("return this")();t.exports=o},{"./_freeGlobal":22}],32:[function(e,t,r){function i(e){return e}t.exports=i},{}],33:[function(e,t,r){var i=e("./_baseIsArguments"),n=e("./isObjectLike"),o=Object.prototype,a=o.hasOwnProperty,u=o.propertyIsEnumerable,f=i(function(){return arguments}())?i:function(e){return n(e)&&a.call(e,"callee")&&!u.call(e,"callee")};t.exports=f},{"./_baseIsArguments":17,"./isObjectLike":40}],34:[function(e,t,r){var i=Array.isArray;t.exports=i},{}],35:[function(e,t,r){function i(e){return null!=e&&o(e.length)&&!n(e)}var n=e("./isFunction"),o=e("./isLength");t.exports=i},{"./isFunction":37,"./isLength":38}],36:[function(e,t,r){var i=e("./_root"),n=e("./stubFalse"),o="object"==typeof r&&r&&!r.nodeType&&r,a=o&&"object"==typeof t&&t&&!t.nodeType&&t,u=a&&a.exports===o,f=u?i.Buffer:void 0,s=f?f.isBuffer:void 0,l=s||n;t.exports=l},{"./_root":31,"./stubFalse":44}],37:[function(e,t,r){function i(e){if(!o(e))return!1;var t=n(e);return t==u||t==f||t==a||t==s}var n=e("./_baseGetTag"),o=e("./isObject"),a="[object AsyncFunction]",u="[object Function]",f="[object GeneratorFunction]",s="[object Proxy]";t.exports=i},{"./_baseGetTag":16,"./isObject":39}],38:[function(e,t,r){function i(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}var n=9007199254740991;t.exports=i},{}],39:[function(e,t,r){function i(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}t.exports=i},{}],40:[function(e,t,r){function i(e){return null!=e&&"object"==typeof e}t.exports=i},{}],41:[function(e,t,r){var i=e("./_baseIsTypedArray"),n=e("./_baseUnary"),o=e("./_nodeUtil"),a=o&&o.isTypedArray,u=a?n(a):i;t.exports=u},{"./_baseIsTypedArray":18,"./_baseUnary":21,"./_nodeUtil":27}],42:[function(e,t,r){function i(e){return a(e)?n(e):o(e)}var n=e("./_arrayLikeKeys"),o=e("./_baseKeys"),a=e("./isArrayLike");t.exports=i},{"./_arrayLikeKeys":15,"./_baseKeys":19,"./isArrayLike":35}],43:[function(e,t,r){function i(){}t.exports=i},{}],44:[function(e,t,r){function i(){return!1}t.exports=i},{}],45:[function(e,t,r){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=e("./Texture2D"),u=e("../util/ImageLoader"),f=e("../util/Util"),s={NEAREST:!0,LINEAR:!0},l={NEAREST:!0,LINEAR:!0,NEAREST_MIPMAP_NEAREST:!0,LINEAR_MIPMAP_NEAREST:!0,NEAREST_MIPMAP_LINEAR:!0,LINEAR_MIPMAP_LINEAR:!0},c={REPEAT:!0,MIRRORED_REPEAT:!0,CLAMP_TO_EDGE:!0},h={UNSIGNED_BYTE:!0,FLOAT:!0},d={RGB:!0,RGBA:!0},p="UNSIGNED_BYTE",E="RGBA",v="REPEAT",y="LINEAR",T=!0,_=!0,m=!0,b=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(i(this,t),e.wrapS=e.wrapS||e.wrap,e.wrapT=e.wrapT||e.wrap,e.minFilter=e.minFilter||e.filter,e.magFilter=e.magFilter||e.filter,e.wrapS=c[e.wrapS]?e.wrapS:v,e.wrapT=c[e.wrapT]?e.wrapT:v,e.minFilter=l[e.minFilter]?e.minFilter:y,e.magFilter=s[e.magFilter]?e.magFilter:y,e.mipMap=void 0!==e.mipMap?e.mipMap:_,e.invertY=void 0!==e.invertY?e.invertY:m,e.premultiplyAlpha=void 0!==e.premultiplyAlpha?e.premultiplyAlpha:T,e.format=d[e.format]?e.format:E,"string"==typeof e.src){e.type="UNSIGNED_BYTE";var o=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));u.load({url:e.src,success:function(t){t=f.resizeCanvas(e,t),o.bufferData(t,e.width,e.height),o.setParameters(o),r&&r(null,o)},error:function(e){r&&r(e,null)}})}else if(f.isCanvasType(e.src)){e.type="UNSIGNED_BYTE",e.src=f.resizeCanvas(e,e.src);var o=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}else{void 0!==e.src&&null!==e.src||(e.mipMap=!1),e.type=h[e.type]?e.type:p;var o=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return n(o)}return o(t,e),t}(a);t.exports=b},{"../util/ImageLoader":60,"../util/Util":61,"./Texture2D":53}],46:[function(e,t,r){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=e("./Texture2D"),u={NEAREST:!0,LINEAR:!0},f={NEAREST:!0,LINEAR:!0},s={REPEAT:!0,CLAMP_TO_EDGE:!0,MIRRORED_REPEAT:!0},l={UNSIGNED_BYTE:!0,UNSIGNED_SHORT:!0,UNSIGNED_INT:!0},c={DEPTH_COMPONENT:!0,DEPTH_STENCIL:!0},h="UNSIGNED_INT",d="DEPTH_COMPONENT",p="CLAMP_TO_EDGE",E="LINEAR",v=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i(this,t),e.wrapS=e.wrapS||e.wrap,e.wrapT=e.wrapT||e.wrap,e.minFilter=e.minFilter||e.filter,e.magFilter=e.magFilter||e.filter,e.wrapS=s[e.wrapS]?e.wrapS:p,e.wrapT=s[e.wrapT]?e.wrapT:p,e.minFilter=f[e.minFilter]?e.minFilter:E,e.magFilter=u[e.magFilter]?e.magFilter:E,e.mipMap=!1,e.invertY=!1,e.premultiplyAlpha=!1,e.format=c[e.format]?e.format:d,"DEPTH_STENCIL"===e.format?e.type="UNSIGNED_INT_24_8_WEBGL":e.type=l[e.type]?e.type:h,n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),t}(a);t.exports=v},{"./Texture2D":53}],47:[function(e,t,r){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),o=e("./WebGLContext"),a={UNSIGNED_BYTE:!0,UNSIGNED_SHORT:!0,UNSIGNED_INT:!0},u={POINTS:!0,LINES:!0,LINE_STRIP:!0,LINE_LOOP:!0,TRIANGLES:!0,TRIANGLE_STRIP:!0,TRIANGLE_FAN:!0},f={UNSIGNED_BYTE:1,UNSIGNED_SHORT:2,UNSIGNED_INT:4},s="UNSIGNED_SHORT",l="TRIANGLES",c=0,h=0,d=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(i(this,e),this.gl=o.get(),this.buffer=null,this.type=a[r.type]?r.type:s,this.mode=u[r.mode]?r.mode:l,this.count=void 0!==r.count?r.count:h,this.byteOffset=void 0!==r.byteOffset?r.byteOffset:c,t)if(t instanceof WebGLBuffer)this.buffer=t;else if(Number.isInteger(t)){if(void 0===r.type)throw"Argument of type `number` must be complimented with a corresponding `options.type`";this.bufferData(t)}else if(t instanceof ArrayBuffer){if(void 0===r.type)throw"Argument of type `ArrayBuffer` must be complimented with a corresponding `options.type`";this.bufferData(t)}else this.bufferData(t);else if(void 0===r.type)throw"Empty buffer must be complimented with a corresponding `options.type`"}return n(e,[{key:"bufferData",value:function(e){var t=this.gl;if(Array.isArray(e))e="UNSIGNED_INT"===this.type?new Uint32Array(e):"UNSIGNED_SHORT"===this.type?new Uint16Array(e):new Uint8Array(e);else if(e instanceof Uint32Array)this.type="UNSIGNED_INT";else if(e instanceof Uint16Array)this.type="UNSIGNED_SHORT";else if(e instanceof Uint8Array)this.type="UNSIGNED_BYTE";else if(!(e instanceof ArrayBuffer||Number.isInteger(e)))throw"Argument must be of type `Array`, `ArrayBuffer`, `ArrayBufferView`, or `number`";if("UNSIGNED_INT"===this.type&&!o.checkExtension("OES_element_index_uint"))throw"Cannot create IndexBuffer of type `UNSIGNED_INT` as extension `OES_element_index_uint` is not supported";return this.count===h&&(Number.isInteger(e)?this.count=e/f[this.type]:this.count=e.length),this.buffer||(this.buffer=t.createBuffer()),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.buffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW),this}},{key:"bufferSubData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c,r=this.gl;if(!this.buffer)throw"Buffer has not yet been allocated, allocate with `bufferData`";if(Array.isArray(e))e="UNSIGNED_INT"===this.type?new Uint32Array(e):"UNSIGNED_SHORT"===this.type?new Uint16Array(e):new Uint8Array(e);else if(!(e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof ArrayBuffer))throw"Argument must be of type `Array`, `ArrayBuffer`, or `ArrayBufferView`";return r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,this.buffer),r.bufferSubData(r.ELEMENT_ARRAY_BUFFER,t,e),this}},{key:"draw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.gl,r=t[e.mode||this.mode],i=t[this.type],n=void 0!==e.byteOffset?e.byteOffset:this.byteOffset,o=void 0!==e.count?e.count:this.count;if(0===o)throw"Attempting to draw with a count of 0";return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.buffer),t.drawElements(r,o,i,n),this}}]),e}();t.exports=d},{"./WebGLContext":58}],48:[function(e,t,r){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),o=e("./WebGLContext"),a={TEXTURE_2D:!0,TEXTURE_CUBE_MAP:!0},u={DEPTH_COMPONENT:!0,DEPTH_STENCIL:!0},f=function(){function e(){i(this,e),this.gl=o.get(),this.framebuffer=this.gl.createFramebuffer(),this.textures=new Map}return n(e,[{key:"bind",value:function(){var e=this.gl;return e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer),this}},{key:"unbind",value:function(){var e=this.gl;return e.bindFramebuffer(e.FRAMEBUFFER,null),this}},{key:"setColorTarget",value:function(e,t,r){var i=this.gl;if(!e)throw"Texture argument is missing";if(a[t]&&void 0===r&&(r=t,t=0),void 0===t)t=0;else if(!Number.isInteger(t)||t<0)throw"Texture color attachment index is invalid";if(r&&!a[r])throw"Texture target is invalid";return this.textures.set("color_"+t,e),this.bind(),i.framebufferTexture2D(i.FRAMEBUFFER,i["COLOR_ATTACHMENT"+t],i[r||"TEXTURE_2D"],e.texture,0),this.unbind(),this}},{key:"setDepthTarget",value:function(e){if(!e)throw"Texture argument is missing";if(!u[e.format])throw"Provided texture is not of format `DEPTH_COMPONENT` or `DEPTH_STENCIL`";var t=this.gl;return this.textures.set("depth",e),this.bind(),t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,e.texture,0),this.unbind(),this}},{key:"resize",value:function(e,t){if("number"!=typeof e||e<=0)throw"Provided `width` of "+e+" is invalid";if("number"!=typeof t||t<=0)throw"Provided `height` of "+t+" is invalid";return this.textures.forEach(function(r){r.resize(e,t)}),this}}]),e}();t.exports=f},{"./WebGLContext":58}],49:[function(e,t,r){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e){var t=null;e.forEach(function(e){if(null===t)t=e.count;else if(t!==e.count)throw"VertexBuffers must all have the same count to be rendered without an IndexBuffer, mismatch of "+(t+" and "+e.count+" found")})}function o(e){var t=new Map;e.forEach(function(e){e.pointers.forEach(function(e,r){var i=t.get(r)||0;t.set(r,i+1)})}),t.forEach(function(e){if(e>1)throw"More than one attribute pointer exists for index `"+e+"`"})}var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),u=e("./VertexPackage"),f=e("./VertexBuffer"),s=e("./IndexBuffer"),l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(i(this,e),t.vertexBuffer||t.vertexBuffers)this.vertexBuffers=t.vertexBuffers||[t.vertexBuffer];else if(t.vertices){var r=new u(t.vertices);this.vertexBuffers=[new f(r.buffer,r.pointers)]}else this.vertexBuffers=[];t.indexBuffer?this.indexBuffer=t.indexBuffer:t.indices?this.indexBuffer=new s(t.indices):this.indexBuffer=null,this.indexBuffer||n(this.vertexBuffers),o(this.vertexBuffers)}return a(e,[{key:"draw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.indexBuffer?(this.vertexBuffers.forEach(function(e){e.bind()}),this.indexBuffer.draw(e),this.vertexBuffers.forEach(function(e){e.unbind()})):(this.vertexBuffers.forEach(function(e){e.bind()}),this.vertexBuffers.length>0&&this.vertexBuffers[0].draw(e),this.vertexBuffers.forEach(function(e){e.unbind()})),this}}]),e}();t.exports=l},{"./IndexBuffer":47,"./VertexBuffer":55,"./VertexPackage":56}],50:[function(e,t,r){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){return e.has(t.name)?e.get(t.name).index:e.size}function o(e,t,r){var i=v.parseDeclarations([t,r],["uniform","attribute"]);i.forEach(function(t){if("attribute"===t.qualifier){var r=n(e.attributes,t);e.attributes.set(t.name,{type:t.type,index:r})}else{var i=t.type+(t.count>1?"[]":"");e.uniforms.set(t.name,{type:t.type,func:T[i]})}})}function a(e,t,r){var i=e.createShader(e[r]);if(e.shaderSource(i,t),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS))throw"An error occurred compiling the shaders:\n"+e.getShaderInfoLog(i);return i}function u(e){var t=e.gl;e.attributes.forEach(function(r,i){t.bindAttribLocation(e.program,r.index,i)})}function f(e){var t=e.gl,r=e.uniforms;r.forEach(function(i,n){var o=t.getUniformLocation(e.program,n);null===o?r.delete(n):i.location=o})}function s(e){return function(t){y.load({url:e,responseType:"text",success:function(e){t(null,e)},error:function(e){t(e,null)}})}}function l(e){return function(t){t(null,e)}}function c(e){return function(t){var r=[];e=e||[],e=Array.isArray(e)?e:[e],e.forEach(function(e){v.isGLSL(e)?r.push(l(e)):r.push(s(e))}),p(r,t)}}function h(e,t){var r=e.gl,i=_(t.define),n=i+(t.common||""),s=t.vert.join(""),l=t.frag.join(""),c=a(r,n+s,"VERTEX_SHADER"),h=a(r,n+l,"FRAGMENT_SHADER");if(o(e,s,l),e.program=r.createProgram(),r.attachShader(e.program,c),r.attachShader(e.program,h),u(e),r.linkProgram(e.program),!r.getProgramParameter(e.program,r.LINK_STATUS))throw"An error occured linking the shader:\n"+r.getProgramInfoLog(e.program);f(e)}var d=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),p=e("async/parallel"),E=e("./WebGLContext"),v=e("./ShaderParser"),y=e("../util/XHRLoader"),T={bool:"uniform1i","bool[]":"uniform1iv",float:"uniform1f","float[]":"uniform1fv",int:"uniform1i","int[]":"uniform1iv",uint:"uniform1i","uint[]":"uniform1iv",vec2:"uniform2fv","vec2[]":"uniform2fv",ivec2:"uniform2iv","ivec2[]":"uniform2iv",vec3:"uniform3fv","vec3[]":"uniform3fv",ivec3:"uniform3iv","ivec3[]":"uniform3iv",vec4:"uniform4fv","vec4[]":"uniform4fv",ivec4:"uniform4iv","ivec4[]":"uniform4iv",mat2:"uniformMatrix2fv","mat2[]":"uniformMatrix2fv",mat3:"uniformMatrix3fv","mat3[]":"uniformMatrix3fv",mat4:"uniformMatrix4fv","mat4[]":"uniformMatrix4fv",sampler2D:"uniform1i",samplerCube:"uniform1i"},_=function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push("#define "+r+" "+e[r]);return t.join("\n")},m=function(){function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(i(this,e),!r.vert)throw"Vertex shader argument `vert` has not been provided";if(!r.frag)throw"Fragment shader argument `frag` has not been provided";this.program=0,this.gl=E.get(),this.version=r.version||"1.00",this.attributes=new Map,this.uniforms=new Map,r.attributes&&r.attributes.forEach(function(e,r){t.attributes.set(e,{index:r})}),p({common:c(r.common),vert:c(r.vert),frag:c(r.frag)},function(e,r){return e?void(n&&setTimeout(function(){n(e,null)})):(h(t,r),void(n&&setTimeout(function(){n(null,t)})))})}return d(e,[{key:"use",value:function(){return this.gl.useProgram(this.program),this}},{key:"setUniform",value:function(e,t){var r=this.uniforms.get(e);if(!r)throw"No uniform found under name `"+e+"`";if(void 0===t||null===t)throw"Value passed for uniform `"+e+"` is undefined or null";return"mat2"===r.type||"mat3"===r.type||"mat4"===r.type?this.gl[r.func](r.location,!1,t):this.gl[r.func](r.location,t),this}},{key:"setUniforms",value:function(e){var t=this;return Object.keys(e).forEach(function(r){t.setUniform(r,e[r])}),this}}]),e}();t.exports=m},{"../util/XHRLoader":62,"./ShaderParser":51,"./WebGLContext":58,"async/parallel":12}],51:[function(e,t,r){"use strict";function i(e){return e.replace(h,"")}function n(e){return e.replace(y,"").replace(T,"")}function o(e){return e.replace(d," ").replace(p," ").replace(E,"$2$4$6")}function a(e,t,r){var i=r.match(v),n=i[1],o=void 0===i[2]?1:parseInt(i[2],10);return{qualifier:e,type:t,name:n,count:o}}function u(e){var t=e.split(",").map(function(e){return e.trim()}),r=t.shift().split(" "),i=r.shift(),n=r.shift(),o=r.concat(t);return o.map(function(e){return a(i,n,e)})}function f(e,t){var r=e.split(";"),i=t.join("|"),n=new RegExp("\\b("+i+")\\b.*"),o=[];return r.forEach(function(e){var t=e.match(n);t&&(o=o.concat(u(t[0])))}),o}function s(e){var t={};return e.filter(function(e){return!t[e.name]&&(t[e.name]=!0,!0)})}function l(e){return c.preprocess(e)}var c=e("./ShaderPreprocessor"),h=/(\/\*([\s\S]*?)\*\/)|(\/\/(.*)$)/gm,d=/(\r\n|\n|\r)/gm,p=/\s{2,}/g,E=/(\s*)(\[)(\s*)(\d+)(\s*)(\])(\s*)/g,v=/([a-zA-Z_][a-zA-Z0-9_]*)(?:\[(\d+)\])?/,y=/\bprecision\s+\w+\s+\w+;/g,T=/\b(highp|mediump|lowp)\s+/g,_=/void\s+main\s*\(\s*(void)*\s*\)\s*/im;t.exports={parseDeclarations:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(0===e.length||0===t.length)return[];e=Array.isArray(e)?e:[e],t=Array.isArray(t)?t:[t];var r=[];return e.forEach(function(e){e=i(e),e=l(e),e=n(e),e=o(e),r=r.concat(f(e,t))}),s(r)},isGLSL:function(e){return _.test(e)}}},{"./ShaderPreprocessor":52}],52:[function(e,t,r){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),o="__DEFINED__",a=/#define\b/i,u=/#undef\b/i,f=/#if\b/i,s=/#ifdef\b/i,l=/#ifndef\b/i,c=/#else\b/i,h=/#elif\b/i,d=/#endif\b/i,p=/#define\s+(\w+)(\s(\w*)?)?/i,E=/#undef\s+(\w+)/i,v=/#if\s+\(?\s*(!?\s*\w+)\s*(==|!=|>=|<=|<|<|>)?\s*(\w*)\s*\)?/i,y=/#ifdef\s+(\w+)/i,T=/#ifndef\s+(\w+)/i,_=/#elif\s+\(?\s*(!?\s*\w+)\s*(==|!=|>=|<=|<|<|>)?\s*(\w*)\s*\)?/i,m=/#([\W\w\s\d])(?:.*\\r?\n)*.*$/gm,b=function(e,t,r){if(void 0===t)return"!"===e[0]?!("true"===e||e>=1):"true"===e||e>=1;switch(t){case"==":return e===r;case"!=":return e!==r;case">":return e>r;case">=":return e>=r;case"<":return e<r;case"<=":return e<=r}throw"Unrecognized logical operator `"+t+"`"},g=function(){function e(t,r){i(this,e),this.type=t,this.conditional=r.trim(),this.body=[],this.children=[]}return n(e,[{key:"eval",value:function(){var e=void 0;switch(this.type){case"if":return e=v.exec(this.conditional),b(e[1],e[2],e[3]);case"ifdef":return e=y.exec(this.conditional),e[1]===o;case"ifndef":return e=T.exec(this.conditional),e[1]!==o;case"elif":return e=_.exec(this.conditional),b(e[1],e[2],e[3])}throw"Unrecognized conditional type `"+this.type+"`"}}]),e}(),A=function(){function e(t,r,n){i(this,e),this.if=new g(t,r),this.elif=[],this.else=null,this.parent=null,this.current=this.if,this.startLine=n,this.endLine=null}return n(e,[{key:"addElse",value:function(e){this.current=new g("else",e),this.else=this.current}},{key:"addElif",value:function(e){this.current=new g("elif",e),this.elif.push(this.current)}},{key:"addBody",value:function(e,t){this.current.body.push({string:e.trim(),line:t})}},{key:"nest",value:function(e){e.parent=this,this.current.children.push(e)}},{key:"extract",value:function(){var e=[];if(this.if.eval())return e=e.concat(this.if.body),this.if.children.forEach(function(t){e=e.concat(t.extract())}),e;for(var t=0;t<this.elif.length;t++){var r=this.elif[t];if(r.eval()){e=e.concat(r.body);for(var i=0;i<r.children.length;i++){var n=r.children[i];e=e.concat(n.extract())}return e}}return this.else?(e=e.concat(this.else.body),this.else.children.forEach(function(t){e=e.concat(t.extract())}),e):[]}},{key:"eval",value:function(){return this.extract().sort(function(e,t){return e.line-t.line}).map(function(e){return e.string}).join("\n")}}]),e}(),w=function(e){var t=[],r=null;if(e.forEach(function(e,i){if(e.match(f)){var n=new A("if",e,i);r?r.nest(n):t.push(n),r=n}else if(e.match(s)){var o=new A("ifdef",e,i);r?r.nest(o):t.push(o),r=o}else if(e.match(l)){var a=new A("ifndef",e,i);r?r.nest(a):t.push(a),r=a}else if(e.match(h)){if(!r)throw"Invalid preprocessor syntax, unexpected `#elif`";r.addElif(e)}else if(e.match(c)){if(!r)throw"Invalid preprocessor syntax, unexpected `#else`";r.addElse(e)}else if(e.match(d)){if(!r)throw"Invalid preprocessor syntax, unexpected `#endif`";r.endLine=i,r=r.parent}else r&&r.addBody(e,i)}),r)throw"Invalid preprocessor syntax, missing expected `#endif`";return t},x=function(e){var t=new Map,r=[];return e.forEach(function(e){if(e.match(a)){var i=p.exec(e);t.set(i[1],i[2]||o)}else if(e.match(u)){var n=E.exec(e);t.delete(n[1])}else if(e.match(s)){var f=y.exec(e);t.has(f[1])&&(e=e.replace(f[1],o)),r.push(e)}else if(e.match(l)){var c=T.exec(e);t.has(c[1])&&(e=e.replace(c[1],o)),r.push(e)}else t.forEach(function(t,r){e=e.replace(r,t)}),r.push(e)}),r};t.exports={preprocess:function(e){var t=e.split("\n");t=x(t);for(var r=w(t),i=r.length-1;i>=0;i--){var n=r[i],o=n.eval();
o.length>0?t.splice(n.startLine,n.endLine-n.startLine+1,o):t.splice(n.startLine,n.endLine-n.startLine+1)}return t.join("\n").replace(m,"")}}},{}],53:[function(e,t,r){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),o=e("./WebGLContext"),a=e("../util/Util"),u={NEAREST:!0,LINEAR:!0},f={NEAREST:!0,LINEAR:!0,NEAREST_MIPMAP_NEAREST:!0,LINEAR_MIPMAP_NEAREST:!0,NEAREST_MIPMAP_LINEAR:!0,LINEAR_MIPMAP_LINEAR:!0},s={NEAREST:!0,LINEAR:!0},l={NEAREST_MIPMAP_NEAREST:!0,LINEAR_MIPMAP_NEAREST:!0,NEAREST_MIPMAP_LINEAR:!0,LINEAR_MIPMAP_LINEAR:!0},c={REPEAT:!0,MIRRORED_REPEAT:!0,CLAMP_TO_EDGE:!0},h={DEPTH_COMPONENT:!0,DEPTH_STENCIL:!0},d="UNSIGNED_BYTE",p="RGBA",E="REPEAT",v="LINEAR",y=!0,T=!0,_=!0,m="_MIPMAP_LINEAR",b=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(i(this,e),t.wrapS=t.wrapS||t.wrap,t.wrapT=t.wrapT||t.wrap,t.minFilter=t.minFilter||t.filter,t.magFilter=t.magFilter||t.filter,this.gl=o.get(),this.texture=null,this.wrapS=t.wrapS||E,this.wrapT=t.wrapT||E,this.minFilter=t.minFilter||v,this.magFilter=t.magFilter||v,this.mipMap=void 0!==t.mipMap?t.mipMap:T,this.invertY=void 0!==t.invertY?t.invertY:_,this.premultiplyAlpha=void 0!==t.premultiplyAlpha?t.premultiplyAlpha:y,this.format=t.format||p,h[this.format]&&!o.checkExtension("WEBGL_depth_texture"))throw"Cannot create Texture2D of format `"+this.format+"` as `WEBGL_depth_texture` extension is unsupported";if(this.type=t.type||d,"FLOAT"===this.type&&!o.checkExtension("OES_texture_float"))throw"Cannot create Texture2D of type `FLOAT` as `OES_texture_float` extension is unsupported";if("string"!=typeof t.src){if(!a.isCanvasType(t.src)){if("number"!=typeof t.width||t.width<=0)throw"`width` argument is missing or invalid";if("number"!=typeof t.height||t.height<=0)throw"`height` argument is missing or invalid";if(a.mustBePowerOfTwo(this)){if(!a.isPowerOfTwo(t.width))throw"Parameters require a power-of-two texture, yet provided width of `"+t.width+"` is not a power of two";if(!a.isPowerOfTwo(t.height))throw"Parameters require a power-of-two texture, yet provided height of `"+t.height+"` is not a power of two"}}this.bufferData(t.src||null,t.width,t.height),this.setParameters(this)}}return n(e,[{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!Number.isInteger(e)||e<0)throw"Texture unit location is invalid";var t=this.gl;return t.activeTexture(t["TEXTURE"+e]),t.bindTexture(t.TEXTURE_2D,this.texture),this}},{key:"unbind",value:function(){var e=this.gl;return e.bindTexture(e.TEXTURE_2D,null),this}},{key:"bufferData",value:function(e,t,r){var i=this.gl;if(this.texture||(this.texture=i.createTexture()),i.bindTexture(i.TEXTURE_2D,this.texture),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,this.invertY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),Array.isArray(e)&&(e="UNSIGNED_SHORT"===this.type?new Uint16Array(e):"UNSIGNED_INT"===this.type?new Uint32Array(e):"FLOAT"===this.type?new Float32Array(e):new Uint8Array(e)),e instanceof Uint8Array)this.type="UNSIGNED_BYTE";else if(e instanceof Uint16Array)this.type="UNSIGNED_SHORT";else if(e instanceof Uint32Array)this.type="UNSIGNED_INT";else if(e instanceof Float32Array)this.type="FLOAT";else if(e&&!(e instanceof ArrayBuffer)&&!a.isCanvasType(e))throw"Argument must be of type `Array`, `ArrayBuffer`, `ArrayBufferView`, `ImageData`, `HTMLImageElement`, `HTMLCanvasElement`, `HTMLVideoElement`, or null";return a.isCanvasType(e)?(this.width=e.width,this.height=e.height,i.texImage2D(i.TEXTURE_2D,0,i[this.format],i[this.format],i[this.type],e)):(this.width=t||this.width,this.height=r||this.height,i.texImage2D(i.TEXTURE_2D,0,i[this.format],this.width,this.height,0,i[this.format],i[this.type],e)),this.mipMap&&i.generateMipmap(i.TEXTURE_2D),i.bindTexture(i.TEXTURE_2D,null),this}},{key:"bufferSubData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,o=this.gl;if(o.bindTexture(o.TEXTURE_2D,this.texture),Array.isArray(e)&&(e="UNSIGNED_SHORT"===this.type?new Uint16Array(e):"UNSIGNED_INT"===this.type?new Uint32Array(e):"FLOAT"===this.type?new Float32Array(e):new Uint8Array(e)),e instanceof Uint8Array){if("UNSIGNED_BYTE"!==this.type)throw"Provided argument of type `Uint8Array` does not match type of `UNSIGNED_BYTE`"}else if(e instanceof Uint16Array){if("UNSIGNED_SHORT"!==this.type)throw"Provided argument of type `Uint16Array` does not match type of `UNSIGNED_SHORT`"}else if(e instanceof Uint32Array){if("UNSIGNED_INT"!==this.type)throw"Provided argument of type `Uint32Array` does not match type of `UNSIGNED_INT`"}else if(e instanceof Float32Array){if("FLOAT"!==this.type)throw"Provided argument of type `Float32Array` does not match type of `FLOAT`"}else if(!(e instanceof ArrayBuffer||a.isCanvasType(e)))throw"Argument must be of type `Array`, `ArrayBuffer`, `ArrayBufferView`, `ImageData`, `HTMLImageElement`, `HTMLCanvasElement`, or `HTMLVideoElement`";if(a.isCanvasType(e))o.texSubImage2D(o.TEXTURE_2D,0,t,r,o[this.format],o[this.type],e);else{if(!Number.isInteger(i))throw"Provided width of `"+i+"` is invalid";if(!Number.isInteger(n))throw"Provided height of `"+n+"` is invalid";if(i+t>this.width)throw"Provided width of `"+i+"` and xOffset of "+(" `"+t+"` overflows the texture width of ")+("`"+this.width+"`");if(n+r>this.height)throw"Provided width of `"+n+"` and xOffset of "+(" `"+r+"` overflows the texture width of ")+("`"+this.height+"`");o.texSubImage2D(o.TEXTURE_2D,0,t,r,i,n,o[this.format],o[this.type],e)}return this.mipMap&&o.generateMipmap(o.TEXTURE_2D),o.bindTexture(o.TEXTURE_2D,null),this}},{key:"setParameters",value:function(e){var t=this.gl;t.bindTexture(t.TEXTURE_2D,this.texture);var r=e.wrapS||e.wrap;if(r){if(!c[r])throw"Texture parameter `"+r+"` is not a valid value for `TEXTURE_WRAP_S`";this.wrapS=r,t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t[this.wrapS])}if(r=e.wrapT||e.wrap){if(!c[r])throw"Texture parameter `"+r+"` is not a valid value for `TEXTURE_WRAP_T`";this.wrapT=r,t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t[this.wrapT])}if(r=e.magFilter||e.filter){if(!u[r])throw"Texture parameter `"+r+"` is not a valid value for 'TEXTURE_MAG_FILTER`";this.magFilter=r,t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t[this.magFilter])}if(r=e.minFilter||e.filter)if(this.mipMap){if(s[r]&&(r+=m),!l[r])throw"Texture parameter `"+r+"` is not a valid value for `TEXTURE_MIN_FILTER`";this.minFilter=r,t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t[this.minFilter])}else{if(!f[r])throw"Texture parameter `"+r+"` is not a valid value for `TEXTURE_MIN_FILTER`";this.minFilter=r,t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t[this.minFilter])}return t.bindTexture(t.TEXTURE_2D,this.texture),this}},{key:"resize",value:function(e,t){if("number"!=typeof e||e<=0)throw"Provided width of `"+e+"` is invalid";if("number"!=typeof t||t<=0)throw"Provided height of `"+t+"` is invalid";return this.bufferData(null,e,t),this}}]),e}();t.exports=b},{"../util/Util":61,"./WebGLContext":58}],54:[function(e,t,r){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e){if("number"!=typeof e.width||e.width<=0)throw"`width` argument is missing or invalid";if("number"!=typeof e.height||e.height<=0)throw"`height` argument is missing or invalid";if(e.width!==e.height)throw"Provided `width` must be equal to `height`";if(h.mustBePowerOfTwo(e)&&!h.isPowerOfTwo(e.width))throw"Parameters require a power-of-two texture, yet provided size of "+e.width+" is not a power of two"}function o(e,t,r){return function(i){c.load({url:r,success:function(r){r=h.resizeCanvas(e,r),e.bufferData(t,r),i(null)},error:function(e){i(e,null)}})}}function a(e,t,r){return function(i){r=h.resizeCanvas(e,r),e.bufferData(t,r),i(null)}}function u(e,t,r){return n(e),function(i){e.bufferData(t,r),i(null)}}var f=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),s=e("async/parallel"),l=e("./WebGLContext"),c=e("../util/ImageLoader"),h=e("../util/Util"),d=["-x","+x","-y","+y","-z","+z"],p={"+z":"TEXTURE_CUBE_MAP_POSITIVE_Z","-z":"TEXTURE_CUBE_MAP_NEGATIVE_Z","+x":"TEXTURE_CUBE_MAP_POSITIVE_X","-x":"TEXTURE_CUBE_MAP_NEGATIVE_X","+y":"TEXTURE_CUBE_MAP_POSITIVE_Y","-y":"TEXTURE_CUBE_MAP_NEGATIVE_Y"},E={TEXTURE_CUBE_MAP_POSITIVE_Z:!0,TEXTURE_CUBE_MAP_NEGATIVE_Z:!0,TEXTURE_CUBE_MAP_POSITIVE_X:!0,TEXTURE_CUBE_MAP_NEGATIVE_X:!0,TEXTURE_CUBE_MAP_POSITIVE_Y:!0,TEXTURE_CUBE_MAP_NEGATIVE_Y:!0},v={NEAREST:!0,LINEAR:!0},y={NEAREST:!0,LINEAR:!0,NEAREST_MIPMAP_NEAREST:!0,LINEAR_MIPMAP_NEAREST:!0,NEAREST_MIPMAP_LINEAR:!0,LINEAR_MIPMAP_LINEAR:!0},T={NEAREST:!0,LINEAR:!0},_={NEAREST_MIPMAP_NEAREST:!0,LINEAR_MIPMAP_NEAREST:!0,NEAREST_MIPMAP_LINEAR:!0,LINEAR_MIPMAP_LINEAR:!0},m={REPEAT:!0,MIRRORED_REPEAT:!0,CLAMP_TO_EDGE:!0},b={RGB:!0,RGBA:!0},g="UNSIGNED_BYTE",A="RGBA",w="CLAMP_TO_EDGE",x="LINEAR",R=!0,N=!0,I=!0,P="_MIPMAP_LINEAR",S=function(){function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(i(this,e),this.gl=l.get(),this.texture=null,r.wrapS=r.wrapS||r.wrap,r.wrapT=r.wrapT||r.wrap,r.minFilter=r.minFilter||r.filter,r.magFilter=r.magFilter||r.filter,this.wrapS=m[r.wrapS]?r.wrapS:w,this.wrapT=m[r.wrapT]?r.wrapT:w,this.minFilter=y[r.minFilter]?r.minFilter:x,this.magFilter=v[r.magFilter]?r.magFilter:x,this.mipMap=void 0!==r.mipMap?r.mipMap:N,this.invertY=void 0!==r.invertY?r.invertY:I,this.premultiplyAlpha=void 0!==r.premultiplyAlpha?r.premultiplyAlpha:R,this.format=b[r.format]?r.format:A,this.type=r.type||g,"FLOAT"===this.type&&!l.checkExtension("OES_texture_float"))throw"Cannot create Texture2D of type `FLOAT` as `OES_texture_float` extension is unsupported";if(this.width=r.width,this.height=r.height,this.bufferedFaces=[],r.faces){var c=[];d.forEach(function(e){var i=r.faces[e],n=p[e];"string"==typeof i?c.push(o(t,n,i)):h.isCanvasType(i)?c.push(a(t,n,i)):c.push(u(t,n,i))}),s(c,function(e){return e?void(f&&setTimeout(function(){f(e,null)})):(t.setParameters(t),void(f&&setTimeout(function(){f(null,t)})))})}else n(this),d.forEach(function(e){t.bufferData(p[e],null)}),this.setParameters(this)}return f(e,[{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!Number.isInteger(e)||e<0)throw"Texture unit location is invalid";var t=this.gl;return t.activeTexture(t["TEXTURE"+e]),t.bindTexture(t.TEXTURE_CUBE_MAP,this.texture),this}},{key:"unbind",value:function(){var e=this.gl;return e.bindTexture(e.TEXTURE_CUBE_MAP,null),this}},{key:"bufferData",value:function(e,t){if(!E[e])throw"Provided `target` of "+e+"  is invalid";var r=this.gl;if(this.texture||(this.texture=r.createTexture()),r.bindTexture(r.TEXTURE_CUBE_MAP,this.texture),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,this.invertY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),Array.isArray(t)&&(t="UNSIGNED_SHORT"===this.type?new Uint16Array(t):"UNSIGNED_INT"===this.type?new Uint32Array(t):"FLOAT"===this.type?new Float32Array(t):new Uint8Array(t)),t instanceof Uint8Array)this.type="UNSIGNED_BYTE";else if(t instanceof Uint16Array)this.type="UNSIGNED_SHORT";else if(t instanceof Uint32Array)this.type="UNSIGNED_INT";else if(t instanceof Float32Array)this.type="FLOAT";else if(t&&!(t instanceof ArrayBuffer)&&!h.isCanvasType(t))throw"Argument must be of type `Array`, `ArrayBuffer`, `ArrayBufferView`, `ImageData`, `HTMLImageElement`, `HTMLCanvasElement`, `HTMLVideoElement`, or null";return h.isCanvasType(t)?(this.width=t.width,this.height=t.height,r.texImage2D(r[e],0,r[this.format],r[this.format],r[this.type],t)):r.texImage2D(r[e],0,r[this.format],this.width,this.height,0,r[this.format],r[this.type],t),this.bufferedFaces.indexOf(e)<0&&this.bufferedFaces.push(e),this.mipMap&&6===this.bufferedFaces.length&&r.generateMipmap(r.TEXTURE_CUBE_MAP),r.bindTexture(r.TEXTURE_CUBE_MAP,null),this}},{key:"setParameters",value:function(e){var t=this.gl;t.bindTexture(t.TEXTURE_CUBE_MAP,this.texture);var r=e.wrapS||e.wrap;if(r){if(!m[r])throw"Texture parameter `"+r+"` is not a valid value for `TEXTURE_WRAP_S`";this.wrapS=r,t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_WRAP_S,t[this.wrapS])}if(r=e.wrapT||e.wrap){if(!m[r])throw"Texture parameter `"+r+"` is not a valid value for `TEXTURE_WRAP_T`";this.wrapT=r,t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_WRAP_T,t[this.wrapT])}if(r=e.magFilter||e.filter){if(!v[r])throw"Texture parameter `"+r+"` is not a valid value for 'TEXTURE_MAG_FILTER`";this.magFilter=r,t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t[this.magFilter])}if(r=e.minFilter||e.filter)if(this.mipMap){if(T[r]&&(r+=P),!_[r])throw"Texture parameter `"+r+"` is not a valid value for `TEXTURE_MIN_FILTER`";this.minFilter=r,t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t[this.minFilter])}else{if(!y[r])throw"Texture parameter `"+r+"` is not a valid value for `TEXTURE_MIN_FILTER`";this.minFilter=r,t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t[this.minFilter])}return t.bindTexture(t.TEXTURE_CUBE_MAP,null),this}}]),e}();t.exports=S},{"../util/ImageLoader":60,"../util/Util":61,"./WebGLContext":58,"async/parallel":12}],55:[function(e,t,r){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e){if(1===e.size)return 0;var t=0,r=0,i=0;return e.forEach(function(e){var n=e.byteOffset,o=e.size,a=e.type;r+=o*l[a],n>t&&(t=n,i=n+o*l[a])}),t>=r?0:i}function o(e){var t=new Map;return Object.keys(e).forEach(function(r){var i=parseInt(r,10);if(isNaN(i))throw"Attribute index `"+r+"` does not represent an integer";var n=e[r],o=n.size,a=n.type,u=n.byteOffset;if(!c[o])throw"Attribute pointer `size` parameter is invalid, must be one of "+JSON.stringify(Object.keys(c));if(!s[a])throw"Attribute pointer `type` parameter is invalid, must be one of "+JSON.stringify(Object.keys(s));t.set(i,{size:o,type:a,byteOffset:void 0!==u?u:h})}),t}var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),u=e("./WebGLContext"),f={POINTS:!0,LINES:!0,LINE_STRIP:!0,LINE_LOOP:!0,TRIANGLES:!0,TRIANGLE_STRIP:!0,TRIANGLE_FAN:!0},s={BYTE:!0,UNSIGNED_BYTE:!0,SHORT:!0,UNSIGNED_SHORT:!0,FIXED:!0,FLOAT:!0},l={BYTE:1,UNSIGNED_BYTE:1,SHORT:2,UNSIGNED_SHORT:2,FIXED:4,FLOAT:4},c={1:!0,2:!0,3:!0,4:!0},h=0,d="TRIANGLES",p=0,E=0,v=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i(this,e),this.gl=u.get(),this.buffer=null,this.mode=f[a.mode]?a.mode:d,this.count=void 0!==a.count?a.count:E,this.indexOffset=void 0!==a.indexOffset?a.indexOffset:p,this.pointers=o(r),this.byteStride=n(this.pointers),t&&(t instanceof WebGLBuffer?this.buffer=t:this.bufferData(t))}return a(e,[{key:"bufferData",value:function(e){var t=this.gl;if(Array.isArray(e))e=new Float32Array(e);else if(!(e instanceof ArrayBuffer||ArrayBuffer.isView(e)||Number.isInteger(e)))throw"Argument must be of type `Array`, `ArrayBuffer`, `ArrayBufferView`, or `Number`";this.buffer||(this.buffer=t.createBuffer()),t.bindBuffer(t.ARRAY_BUFFER,this.buffer),t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)}},{key:"bufferSubData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h,r=this.gl;if(!this.buffer)throw"Buffer has not yet been allocated, allocate with `bufferData`";if(Array.isArray(e))e=new Float32Array(e);else if(!(e instanceof ArrayBuffer||ArrayBuffer.isView(e)))throw"Argument must be of type `Array`, `ArrayBuffer`, or `ArrayBufferView`";return r.bindBuffer(r.ARRAY_BUFFER,this.buffer),r.bufferSubData(r.ARRAY_BUFFER,t,e),this}},{key:"bind",value:function(){var e=this,t=this.gl;return t.bindBuffer(t.ARRAY_BUFFER,this.buffer),this.pointers.forEach(function(r,i){t.vertexAttribPointer(i,r.size,t[r.type],!1,e.byteStride,r.byteOffset),t.enableVertexAttribArray(i)}),this}},{key:"unbind",value:function(){var e=this.gl;return e.bindBuffer(e.ARRAY_BUFFER,this.buffer),this.pointers.forEach(function(t,r){e.disableVertexAttribArray(r)}),this}},{key:"draw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.gl,r=t[e.mode||this.mode],i=void 0!==e.indexOffset?e.indexOffset:this.indexOffset,n=void 0!==e.count?e.count:this.count;if(0===n)throw"Attempting to draw with a count of 0";return t.drawArrays(r,i,n),this}}]),e}();t.exports=v},{"./WebGLContext":58}],56:[function(e,t,r){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e){var t=[];return Object.keys(e).forEach(function(r){var i=parseFloat(r);if(!Number.isInteger(i)||i<0)throw"Attribute index `"+r+"` does not represent a valid integer";var n=e[r];if(!(Array.isArray(n)&&n.length>0))throw"Error parsing attribute of index `"+i+"`";t.push({index:i,data:n})}),t.sort(function(e,t){return e.index-t.index}),t}function o(e){return Array.isArray(e)?e.length:void 0!==e.x&&void 0!==e.y?void 0!==e.z?void 0!==e.w?4:3:2:1}function a(e,t){var r=Number.MAX_VALUE,i=0;t.forEach(function(t){var n=o(t.data[0]);r=Math.min(r,t.data.length),e.pointers[t.index]={type:h,size:n,byteOffset:i*d},i+=n}),e.stride=i,e.length=r}function u(e,t,r,i,n){for(var o=0;o<r;o++){var a=t[o],u=i+n*o;void 0!==a.x?e[u]=a.x:void 0!==a[0]?e[u]=a[0]:e[u]=a}}function f(e,t,r,i,n){for(var o=0;o<r;o++){var a=t[o],u=i+n*o;e[u]=void 0!==a.x?a.x:a[0],e[u+1]=void 0!==a.y?a.y:a[1]}}function s(e,t,r,i,n){for(var o=0;o<r;o++){var a=t[o],u=i+n*o;e[u]=void 0!==a.x?a.x:a[0],e[u+1]=void 0!==a.y?a.y:a[1],e[u+2]=void 0!==a.z?a.z:a[2]}}function l(e,t,r,i,n){for(var o=0;o<r;o++){var a=t[o],u=i+n*o;e[u]=void 0!==a.x?a.x:a[0],e[u+1]=void 0!==a.y?a.y:a[1],e[u+2]=void 0!==a.z?a.z:a[2],e[u+3]=void 0!==a.w?a.w:a[3]}}var c=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),h="FLOAT",d=4,p=function(){function e(t){i(this,e),this.stride=0,this.length=0,this.buffer=null,this.pointers={},t&&this.set(t)}return c(e,[{key:"set",value:function(e){e=n(e),a(this,e);var t=this.length,r=this.stride,i=this.pointers,o=this.buffer=new Float32Array(t*r);return e.forEach(function(e){var n=i[e.index],a=n.byteOffset/d;switch(n.size){case 2:f(o,e.data,t,a,r);break;case 3:s(o,e.data,t,a,r);break;case 4:l(o,e.data,t,a,r);break;default:u(o,e.data,t,a,r)}}),this}}]),e}();t.exports=p},{}],57:[function(e,t,r){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t,r,i,n){var o=e.gl;t=void 0!==t?t:e.x,r=void 0!==r?r:e.y,i=void 0!==i?i:e.width,n=void 0!==n?n:e.height,o.viewport(t,r,i,n)}var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),a=e("./WebGLContext"),u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.gl=a.get(),this.stack=[],this.resize(t.width||this.gl.canvas.width,t.height||this.gl.canvas.height)}return o(e,[{key:"resize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if("number"!=typeof e||e<=0)throw"Provided `width` of `"+e+"` is invalid";if("number"!=typeof t||t<=0)throw"Provided `height` of `"+t+"` is invalid";return this.width=e,this.height=t,this.gl.canvas.width=e,this.gl.canvas.height=t,this}},{key:"push",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.width,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.height;if("number"!=typeof e)throw"Provided `x` of `"+e+"` is invalid";if("number"!=typeof t)throw"Provided `y` of `"+t+"` is invalid";if("number"!=typeof r||r<=0)throw"Provided `width` of `"+r+"` is invalid";if("number"!=typeof i||i<=0)throw"Provided `height` of `"+i+"` is invalid";return this.stack.push({x:e,y:t,width:r,height:i}),n(this,e,t,r,i),this}},{key:"pop",value:function(){if(0===this.stack.length)throw"Viewport stack is empty";if(this.stack.pop(),this.stack.length>0){var e=this.stack[this.stack.length-1];n(this,e.x,e.y,e.width,e.height)}else n(this);return this}}]),e}();t.exports=u},{"./WebGLContext":58}],58:[function(e,t,r){"use strict";function i(){var e=function(e){var t=16*Math.random()|0,r="x"===e?t:3&t|8;return r.toString(16)};return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e)}function n(e){return e.id||(e.id=i()),e.id}function o(e){return e instanceof HTMLCanvasElement?e:"string"==typeof e?document.getElementById(e)||document.querySelector(e):null}function a(e){var t=null;return h.forEach(function(r){e===r.gl&&(t=r)}),t}function u(e){if(void 0===e){if(d)return d}else{if(e instanceof WebGLRenderingContext)return a(e);var t=o(e);if(t)return h.get(n(t))}return null}function f(e){var t=e.gl;c.forEach(function(r){e.extensions.set(r,t.getExtension(r))})}function s(e,t){var r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),i={id:n(e),gl:r,extensions:new Map};return f(i),h.set(n(e),i),d=i,i}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=["OES_texture_float","OES_texture_half_float","WEBGL_lose_context","OES_standard_derivatives","OES_vertex_array_object","WEBGL_debug_renderer_info","WEBGL_debug_shaders","WEBGL_compressed_texture_s3tc","WEBGL_depth_texture","OES_element_index_uint","EXT_texture_filter_anisotropic","EXT_frag_depth","WEBGL_draw_buffers","ANGLE_instanced_arrays","OES_texture_float_linear","OES_texture_half_float_linear","EXT_blend_minmax","EXT_shader_texture_lod","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_pvrtc","EXT_color_buffer_half_float","WEBGL_color_buffer_float","EXT_sRGB","WEBGL_compressed_texture_etc1","EXT_disjoint_timer_query","EXT_color_buffer_float"],h=new Map,d=null;t.exports={bind:function(e){var t=u(e);if(t)return d=t,this;throw"No context exists for provided argument '"+e+"'"},get:function(e,t){var r=u(e);if(r)return r.gl;var i=o(e);if(!i)throw"No context is currently bound or could be associated with provided argument of type "+("undefined"==typeof e?"undefined":l(e));return s(i,t).gl},remove:function(e){var t=u(e);if(!t)throw"No context is currently bound or could be associated with provided argument of type "+("undefined"==typeof e?"undefined":l(e));h.delete(t.id),t===d&&(d=null)},supportedExtensions:function(e){var t=u(e);if(t){var r=t.extensions,i=[];return r.forEach(function(e,t){e&&i.push(t)}),i}throw"No context is currently bound or could be associated with provided argument of type "+("undefined"==typeof e?"undefined":l(e))},unsupportedExtensions:function(e){var t=u(e);if(t){var r=t.extensions,i=[];return r.forEach(function(e,t){e||i.push(t)}),i}throw"No context is currently bound or could be associated with provided argument of type "+("undefined"==typeof e?"undefined":l(e))},checkExtension:function(e,t){t||(t=e,e=void 0);var r=u(e);if(r){var i=r.extensions;return!!i.get(t)}throw"No context is currently bound or could be associated with provided argument of type "+("undefined"==typeof e?"undefined":l(e))},getExtension:function(e,t){t||(t=e,e=void 0);var r=u(e);if(r){var i=r.extensions;return i.get(t)||null}throw"No context is currently bound or could be associated with provided argument of type "+("undefined"==typeof e?"undefined":l(e))}}},{}],59:[function(e,t,r){"use strict";t.exports={ColorTexture2D:e("./core/ColorTexture2D"),DepthTexture2D:e("./core/DepthTexture2D"),IndexBuffer:e("./core/IndexBuffer"),Renderable:e("./core/Renderable"),RenderTarget:e("./core/RenderTarget"),Shader:e("./core/Shader"),Texture2D:e("./core/Texture2D"),TextureCubeMap:e("./core/TextureCubeMap"),VertexBuffer:e("./core/VertexBuffer"),VertexPackage:e("./core/VertexPackage"),Viewport:e("./core/Viewport"),WebGLContext:e("./core/WebGLContext")}},{"./core/ColorTexture2D":45,"./core/DepthTexture2D":46,"./core/IndexBuffer":47,"./core/RenderTarget":48,"./core/Renderable":49,"./core/Shader":50,"./core/Texture2D":53,"./core/TextureCubeMap":54,"./core/VertexBuffer":55,"./core/VertexPackage":56,"./core/Viewport":57,"./core/WebGLContext":58}],60:[function(e,t,r){"use strict";t.exports={load:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new Image;t.onload=function(){e.success&&e.success(t)},t.onerror=function(t){if(e.error){var r="Unable to load image from URL: `"+t.path[0].currentSrc+"`";e.error(r)}},t.crossOrigin=e.crossOrigin?"anonymous":void 0,t.src=e.url}}},{}],61:[function(e,t,r){"use strict";function i(e){return e instanceof ImageData||e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement}function n(e){return e.mipMap||"REPEAT"===e.wrapS||"MIRRORED_REPEAT"===e.wrapS||"REPEAT"===e.wrapT||"MIRRORED_REPEAT"===e.wrapT}function o(e){return 0!==e&&0===(e&e-1)}function a(e){return 0!==e&&(e-=1),e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e+1}function u(e,t){if(!n(e)||o(t.width)&&o(t.height))return t;var r=document.createElement("canvas");r.width=a(t.width),r.height=a(t.height);var i=r.getContext("2d");return i.drawImage(t,0,0,t.width,t.height,0,0,r.width,r.height),r}t.exports={isCanvasType:i,mustBePowerOfTwo:n,isPowerOfTwo:o,nextHighestPowerOfTwo:a,resizeCanvas:u}},{}],62:[function(e,t,r){"use strict";t.exports={load:function(e){var t=new XMLHttpRequest;t.open("GET",e.url,!0),t.responseType=e.responseType,t.onreadystatechange=function(){4===t.readyState&&(200===t.status?e.success&&e.success(t.response):e.error&&e.error("GET "+t.responseURL+" "+t.status+" ("+t.statusText+")"))},t.withCredentials=!!e.crossOrigin,t.send()}}},{}]},{},[59])(59)});